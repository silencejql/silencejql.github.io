<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Silencejql</title>
  
  
  <link href="https://silencejql.github.io/atom.xml" rel="self"/>
  
  <link href="https://silencejql.github.io/"/>
  <updated>2025-11-03T02:08:42.162Z</updated>
  <id>https://silencejql.github.io/</id>
  
  <author>
    <name>Justin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>BBK工位excel多表打印-left join lateral</title>
    <link href="https://silencejql.github.io/BBK%E5%B7%A5%E4%BD%8Dexcel%E5%A4%9A%E8%A1%A8%E6%89%93%E5%8D%B0-left-join-lateral.html"/>
    <id>https://silencejql.github.io/BBK%E5%B7%A5%E4%BD%8Dexcel%E5%A4%9A%E8%A1%A8%E6%89%93%E5%8D%B0-left-join-lateral.html</id>
    <published>2025-11-03T02:07:02.000Z</published>
    <updated>2025-11-03T02:08:42.162Z</updated>
    
    <content type="html"><![CDATA[<p>工位多表查询打印数据<br><span id="more"></span></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PrintDbLocal</span> : <span class="title">PrintDbBase</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//表中包含“已打印”</span></span><br><span class="line">    <span class="built_in">string</span> m_sPrintedField = <span class="string">&quot;已打印&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> m_DbConnectString = <span class="string">&quot;$Npgsql$Database=LocalDB;Host=LocalHost;Port=5432;Username=postgres;Password=123&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> m_PrintTable = <span class="string">&quot;四轮表&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> m_Condition = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">//select</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">SelectExcelTemplateConfig</span>(<span class="params"><span class="built_in">string</span> sDefExcelTemplate</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">base</span>.SelectExcelTemplateConfig(sDefExcelTemplate);</span><br><span class="line"></span><br><span class="line">        m_DbConnectString = cfg.Sub(<span class="string">&quot;DbConnectString&quot;</span>).GetValue(m_DbConnectString).zString();</span><br><span class="line">        m_PrintTable = cfg.Sub(<span class="string">&quot;MainTable&quot;</span>).GetValue(m_PrintTable).zString();</span><br><span class="line">        m_Condition = cfg.Sub(<span class="string">&quot;Condition&quot;</span>).GetValue(m_Condition).zString();</span><br><span class="line">        <span class="built_in">string</span> tmpPrint = cfg.Sub(<span class="string">&quot;PrinterName&quot;</span>).GetValue(<span class="string">&quot;&quot;</span>).zString();</span><br><span class="line">        <span class="keyword">if</span> (tmpPrint != <span class="string">&quot;&quot;</span>)</span><br><span class="line">            m_PrinterName = tmpPrint;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ConfigEdit</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ShowConfig</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        XmlConfigurationEdit edit = <span class="keyword">new</span> XmlConfigurationEdit(cfgBoot, m_sDefExcelName);</span><br><span class="line">        edit.ShowDialog();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ShowExcelConfig</span>(<span class="params"><span class="built_in">string</span> exfilter = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> sql = CreateMultiTableConfigSqlString(m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>));</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.FillSchema(dt, SchemaType.Mapped);</span><br><span class="line">        Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; dicData = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">        <span class="keyword">foreach</span> (DataColumn dc <span class="keyword">in</span> dt.Columns)</span><br><span class="line">            dicData.Add(dc.ColumnName, <span class="built_in">string</span>.Empty);</span><br><span class="line">        DataChange(dicData);</span><br><span class="line">        GetPrintExcel().ExcelConfig(dicData, exfilter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Manual</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ManualFindData_Time</span>(<span class="params">DateTime tFrom, DateTime tTo</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> sql = <span class="built_in">string</span>.Format(<span class="string">&quot;select [ID],[VIN],[已打印],[测试时间] from [&#123;0&#125;] where [测试时间] &gt; &#x27;&#123;1&#125;&#x27; and [测试时间] &lt; &#x27;&#123;2&#125;&#x27;&quot;</span>.ToLgsSQL(),</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>], tFrom.ToString(), tTo.ToString());</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.Fill(dt);</span><br><span class="line">        ManualDataTable = dt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ManualFindData_VIN</span>(<span class="params"><span class="built_in">string</span> sVIN</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> sql = <span class="built_in">string</span>.Format(<span class="string">&quot;select [ID],[VIN],[已打印],[测试时间] from [&#123;0&#125;] where [VIN] like &#x27;%&#123;1&#125;%&#x27;&quot;</span>.ToLgsSQL(),</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>], sVIN);</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.Fill(dt);</span><br><span class="line">        ManualDataTable = dt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; <span class="title">ManualFromIndex</span>(<span class="params"><span class="built_in">int</span> index</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; datas = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">        <span class="built_in">string</span> sID = ManualDataTable.Rows[index][<span class="number">1</span>].zString();</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">string</span> sql = CreateMultiTableSqlString(m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>), sID);</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.Fill(dt);</span><br><span class="line"></span><br><span class="line">        DataRow dr = dt.Rows[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">foreach</span> (DataColumn dc <span class="keyword">in</span> dt.Columns)</span><br><span class="line">            datas.Add(dc.ColumnName, dr[dc].zString());</span><br><span class="line"></span><br><span class="line">        DataChange(datas);</span><br><span class="line">        <span class="keyword">return</span> datas;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ManualUpdateIndex</span>(<span class="params"><span class="built_in">int</span> index</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ManualDataTable.Rows[index][Lgs.To(<span class="string">&quot;已打印&quot;</span>)] = <span class="string">&quot;Y&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> sID = ManualDataTable.Rows[index][<span class="number">0</span>].zString();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> sql = <span class="built_in">string</span>.Format(<span class="string">&quot;update [&#123;0&#125;] set [已打印] = &#x27;Y&#x27; where [ID] = &#123;1&#125;&quot;</span>,</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>], sID);</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.Fill(dt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Auto</span></span><br><span class="line">    <span class="function"><span class="built_in">bool</span> <span class="title">CheckCondition</span>(<span class="params">DataTable dt</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!m_Condition.Contains(<span class="string">&#x27;=&#x27;</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">string</span>[] ss = m_Condition.Split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">        <span class="built_in">string</span> tmpField = ss[<span class="number">0</span>].Trim();</span><br><span class="line">        <span class="built_in">string</span> tmpSign = ss[<span class="number">1</span>].Trim();</span><br><span class="line">        <span class="keyword">if</span> (dt.Columns.Contains(tmpField))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> dt.Rows[<span class="number">0</span>][tmpField].zString().StartsWith(tmpSign);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">AutoPrintSave_SQL</span>(<span class="params">ExcelPrintSaveOption ExOption, <span class="built_in">string</span> sql</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        DbDataAdapter m_adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable m_dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        m_adap.Fill(m_dt);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_dt.Rows.Count &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        DataRow dr = m_dt.Rows[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (CheckCondition(m_dt))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//打印</span></span><br><span class="line">            Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; dicData = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">            <span class="keyword">foreach</span> (DataColumn dc <span class="keyword">in</span> m_dt.Columns)</span><br><span class="line">                dicData.Add(dc.ColumnName, dr[dc].zString());</span><br><span class="line">            DataChange(dicData);</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="built_in">string</span> sVIN = <span class="string">&quot;12345678901234567&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (dicData.ContainsKey(<span class="string">&quot;VIN&quot;</span>))</span><br><span class="line">                sVIN = dicData[<span class="string">&quot;VIN&quot;</span>];</span><br><span class="line">            <span class="built_in">string</span> SaveFile = ToSaveFile(m_sDefExcelName, sVIN);</span><br><span class="line"></span><br><span class="line">            ExcelPrintSave(ExOption, dicData, SaveFile);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//更新</span></span><br><span class="line">        <span class="built_in">string</span> sID = dr[<span class="string">&quot;ID&quot;</span>].zString();</span><br><span class="line">        sql = <span class="built_in">string</span>.Format(<span class="string">&quot;update [&#123;0&#125;] set [已打印] = &#x27;Y&#x27; where [ID] = &#123;1&#125;&quot;</span>,</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>], sID);</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        DbDataAdapter adap = BConnString.CreateDataAdapter(sql, m_DbConnectString);</span><br><span class="line">        DataTable dt = <span class="keyword">new</span> DataTable();</span><br><span class="line">        adap.Fill(dt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">AutoPrintSave</span>(<span class="params">ExcelPrintSaveOption ExOption</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!m_bAutoPrint)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">string</span> sql = <span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] where [已打印] = &#x27;N&#x27; or [已打印] is null order by [ID] desc&quot;</span>.ToLgsSQL(),</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>]);</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        AutoPrintSave_SQL(ExOption, sql);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">AutoPrintSave_VIN</span>(<span class="params">ExcelPrintSaveOption ExOption, <span class="built_in">string</span> vin</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> sql = <span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] where [VIN] = &#x27;&#123;1&#125;&#x27; order by [ID] desc&quot;</span>.ToLgsSQL(),</span><br><span class="line">            m_PrintTable.Split(<span class="string">&#x27;;&#x27;</span>)[<span class="number">0</span>], vin);</span><br><span class="line">        sql = LgsToSQL(sql);</span><br><span class="line"></span><br><span class="line">        AutoPrintSave_SQL(ExOption, sql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">CreateMultiTableConfigSqlString</span>(<span class="params"><span class="built_in">string</span>[] tableNames</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        StringBuilder uploadSql = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">if</span> (tableNames.Length &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] &quot;</span>, tableNames[<span class="number">0</span>]));</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="built_in">string</span> tName <span class="keyword">in</span> tableNames)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (tName == tableNames[<span class="number">0</span>])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;left join [&#123;0&#125;] on [&#123;1&#125;].[VIN]=[&#123;0&#125;].[VIN]&quot;</span>, tName, tableNames[<span class="number">0</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot; where 1=0&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] where 1=0&quot;</span>,tableNames[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uploadSql.ToString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">CreateMultiTableSqlString</span>(<span class="params"><span class="built_in">string</span>[] tableNames, <span class="built_in">string</span> VIN</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        StringBuilder uploadSql = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">if</span> (tableNames.Length &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] &quot;</span>, tableNames[<span class="number">0</span>]));</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="built_in">string</span> tName <span class="keyword">in</span> tableNames)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (tName == tableNames[<span class="number">0</span>])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;left join lateral (select * from [&#123;0&#125;] where [&#123;0&#125;].[VIN]=[&#123;1&#125;].[VIN] order by [&#123;0&#125;].[ID] desc limit 1) as &#123;0&#125; on true &quot;</span>, tName, tableNames[<span class="number">0</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;order by [&#123;0&#125;].[ID] desc &quot;</span>, tableNames[<span class="number">0</span>]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            uploadSql.Append(<span class="built_in">string</span>.Format(<span class="string">&quot;select * from [&#123;0&#125;] where [&#123;0&#125;].[ID]=&#x27;&#123;1&#125;&#x27; order by [&#123;0&#125;].[ID] desc&quot;</span>,</span><br><span class="line">            tableNames[<span class="number">0</span>], VIN));</span><br><span class="line">        <span class="comment">//uploadSql.Append(string.Format(&quot; limit 1&quot;));</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uploadSql.ToString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;工位多表查询打印数据&lt;br&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>SQL left join lateral</title>
    <link href="https://silencejql.github.io/SQL-left-join-lateral.html"/>
    <id>https://silencejql.github.io/SQL-left-join-lateral.html</id>
    <published>2025-11-03T01:43:52.000Z</published>
    <updated>2025-11-03T01:46:03.380Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol><li><a href="#概述">概述</a></li><li><a href="#基本概念">基本概念</a></li><li><a href="#语法详解">语法详解</a></li><li><a href="#实际应用场景">实际应用场景</a></li><li><a href="#性能优化">性能优化</a></li><li><a href="#跨数据库兼容性">跨数据库兼容性</a></li><li><a href="#最佳实践">最佳实践</a></li><li><a href="#常见问题">常见问题</a></li></ol><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="什么是-LATERAL-JOIN？"><a href="#什么是-LATERAL-JOIN？" class="headerlink" title="什么是 LATERAL JOIN？"></a>什么是 LATERAL JOIN？</h3><p><code>LATERAL JOIN</code> 是 SQL 中的一种高级连接方式，它允许在 JOIN 的右侧子查询中引用左侧表的列。<code>LEFT JOIN LATERAL</code> 是它的左外连接版本，即使右侧没有匹配记录，也会返回左侧的所有记录。</p><h3 id="为什么需要-LATERAL-JOIN？"><a href="#为什么需要-LATERAL-JOIN？" class="headerlink" title="为什么需要 LATERAL JOIN？"></a>为什么需要 LATERAL JOIN？</h3><p>在传统 SQL JOIN 中，右侧子查询不能引用左侧表的列，这限制了某些复杂查询的实现。LATERAL JOIN 解决了这个问题。</p><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="核心特性"><a href="#核心特性" class="headerlink" title="核心特性"></a>核心特性</h3><ol><li><strong>双向引用</strong>: 右侧子查询可以访问左侧表的列</li><li><strong>逐行执行</strong>: 对于左侧表的每一行，都会执行一次右侧子查询</li><li><strong>保持连接语义</strong>: 支持 INNER、LEFT、RIGHT 等所有连接类型</li></ol><h3 id="与传统-JOIN-的对比"><a href="#与传统-JOIN-的对比" class="headerlink" title="与传统 JOIN 的对比"></a>与传统 JOIN 的对比</h3><div class="table-container"><table><thead><tr><th>特性</th><th>传统 JOIN</th><th>LATERAL JOIN</th></tr></thead><tbody><tr><td>右侧引用左侧</td><td>❌ 不允许</td><td>✅ 允许</td></tr><tr><td>执行方式</td><td>集合操作</td><td>逐行执行</td></tr><tr><td>子查询中的 LIMIT</td><td>全局限制</td><td>每行独立限制</td></tr></tbody></table></div><h2 id="语法详解"><a href="#语法详解" class="headerlink" title="语法详解"></a>语法详解</h2><h3 id="基本语法结构"><a href="#基本语法结构" class="headerlink" title="基本语法结构"></a>基本语法结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    left_table.columns,</span><br><span class="line">    lateral_alias.columns</span><br><span class="line"><span class="keyword">FROM</span> left_table</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    subquery_that_references_left_table</span><br><span class="line">) <span class="keyword">AS</span> lateral_alias <span class="keyword">ON</span> join_condition</span><br></pre></td></tr></table></figure><h3 id="语法组件说明"><a href="#语法组件说明" class="headerlink" title="语法组件说明"></a>语法组件说明</h3><h4 id="1-左侧表-left-table"><a href="#1-左侧表-left-table" class="headerlink" title="1. 左侧表 (left_table)"></a>1. 左侧表 (left_table)</h4><p>可以是表、视图或子查询</p><h4 id="2-LATERAL-关键字"><a href="#2-LATERAL-关键字" class="headerlink" title="2. LATERAL 关键字"></a>2. LATERAL 关键字</h4><p>指示数据库引擎允许右侧引用左侧</p><h4 id="3-右侧子查询"><a href="#3-右侧子查询" class="headerlink" title="3. 右侧子查询"></a>3. 右侧子查询</h4><p>可以包含：</p><ul><li>对左侧表列的引用</li><li>WHERE、GROUP BY、HAVING 子句</li><li>LIMIT、ORDER BY</li><li>聚合函数</li></ul><h4 id="4-ON-条件"><a href="#4-ON-条件" class="headerlink" title="4. ON 条件"></a>4. ON 条件</h4><p>连接条件，通常为 <code>ON true</code> 当子查询已包含过滤条件时</p><h3 id="完整语法示例"><a href="#完整语法示例" class="headerlink" title="完整语法示例"></a>完整语法示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    e.employee_id,</span><br><span class="line">    e.name,</span><br><span class="line">    latest_orders.order_id,</span><br><span class="line">    latest_orders.order_date</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        order_id,</span><br><span class="line">        order_date,</span><br><span class="line">        amount</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> employee_id <span class="operator">=</span> e.employee_id</span><br><span class="line">      <span class="keyword">AND</span> order_date <span class="operator">&gt;=</span> <span class="built_in">CURRENT_DATE</span> <span class="operator">-</span> <span class="type">INTERVAL</span> <span class="string">&#x27;30 days&#x27;</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_date <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">5</span></span><br><span class="line">) <span class="keyword">AS</span> latest_orders <span class="keyword">ON</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> e.department <span class="operator">=</span> <span class="string">&#x27;Sales&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="实际应用场景"><a href="#实际应用场景" class="headerlink" title="实际应用场景"></a>实际应用场景</h2><h3 id="场景-1：获取每个用户的最近-N-条记录"><a href="#场景-1：获取每个用户的最近-N-条记录" class="headerlink" title="场景 1：获取每个用户的最近 N 条记录"></a>场景 1：获取每个用户的最近 N 条记录</h3><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>需要为每个用户获取最近 3 笔订单记录</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建示例数据</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> orders (</span><br><span class="line">    order_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    user_id <span class="type">INT</span>,</span><br><span class="line">    order_date <span class="type">DATE</span>,</span><br><span class="line">    amount <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> users <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;alice&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;bob&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;charlie&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;2024-01-15&#x27;</span>, <span class="number">100.00</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="number">1</span>, <span class="string">&#x27;2024-01-20&#x27;</span>, <span class="number">200.00</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="number">1</span>, <span class="string">&#x27;2024-01-25&#x27;</span>, <span class="number">150.00</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">1</span>, <span class="string">&#x27;2024-02-01&#x27;</span>, <span class="number">300.00</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">2</span>, <span class="string">&#x27;2024-01-18&#x27;</span>, <span class="number">250.00</span>);</span><br></pre></td></tr></table></figure><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    u.user_id,</span><br><span class="line">    u.username,</span><br><span class="line">    recent_orders.order_id,</span><br><span class="line">    recent_orders.order_date,</span><br><span class="line">    recent_orders.amount</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        order_id,</span><br><span class="line">        order_date,</span><br><span class="line">        amount</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> u.user_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_date <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">3</span></span><br><span class="line">) <span class="keyword">AS</span> recent_orders <span class="keyword">ON</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> u.user_id, recent_orders.order_date <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><h4 id="结果示例"><a href="#结果示例" class="headerlink" title="结果示例"></a>结果示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">user_id | username | order_id | order_date | amount</span><br><span class="line">--------|----------|----------|------------|--------</span><br><span class="line">1       | alice    | 4        | 2024-02-01 | 300.00</span><br><span class="line">1       | alice    | 3        | 2024-01-25 | 150.00</span><br><span class="line">1       | alice    | 2        | 2024-01-20 | 200.00</span><br><span class="line">2       | bob      | 5        | 2024-01-18 | 250.00</span><br><span class="line">3       | charlie  | NULL     | NULL       | NULL</span><br></pre></td></tr></table></figure><h3 id="场景-2：复杂聚合计算"><a href="#场景-2：复杂聚合计算" class="headerlink" title="场景 2：复杂聚合计算"></a>场景 2：复杂聚合计算</h3><h4 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h4><p>需要为每个产品计算多种统计指标</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> products (</span><br><span class="line">    product_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    product_name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    category <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> sales (</span><br><span class="line">    sale_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    product_id <span class="type">INT</span>,</span><br><span class="line">    sale_date <span class="type">DATE</span>,</span><br><span class="line">    quantity <span class="type">INT</span>,</span><br><span class="line">    price <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    p.product_id,</span><br><span class="line">    p.product_name,</span><br><span class="line">    stats.total_sales,</span><br><span class="line">    stats.avg_price,</span><br><span class="line">    stats.recent_sales_count</span><br><span class="line"><span class="keyword">FROM</span> products p</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> total_sales,</span><br><span class="line">        <span class="built_in">AVG</span>(price) <span class="keyword">as</span> avg_price,</span><br><span class="line">        <span class="built_in">COUNT</span>(<span class="keyword">CASE</span> <span class="keyword">WHEN</span> sale_date <span class="operator">&gt;=</span> <span class="built_in">CURRENT_DATE</span> <span class="operator">-</span> <span class="type">INTERVAL</span> <span class="string">&#x27;30 days&#x27;</span> </span><br><span class="line">                  <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">END</span>) <span class="keyword">as</span> recent_sales_count</span><br><span class="line">    <span class="keyword">FROM</span> sales </span><br><span class="line">    <span class="keyword">WHERE</span> product_id <span class="operator">=</span> p.product_id</span><br><span class="line">) <span class="keyword">AS</span> stats <span class="keyword">ON</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> p.category <span class="operator">=</span> <span class="string">&#x27;Electronics&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="场景-3：JSON-数据解析"><a href="#场景-3：JSON-数据解析" class="headerlink" title="场景 3：JSON 数据解析"></a>场景 3：JSON 数据解析</h3><h4 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h4><p>用户配置存储在 JSON 字段中，需要展开分析</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> users_with_preferences (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    preferences JSONB</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> users_with_preferences <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;&#123;&quot;notifications&quot;: &#123;&quot;email&quot;: true, &quot;sms&quot;: false&#125;, &quot;theme&quot;: &quot;dark&quot;&#125;&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;&#123;&quot;notifications&quot;: &#123;&quot;email&quot;: false, &quot;sms&quot;: true&#125;, &quot;theme&quot;: &quot;light&quot;&#125;&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    u.user_id,</span><br><span class="line">    u.username,</span><br><span class="line">    pref.key <span class="keyword">as</span> preference_type,</span><br><span class="line">    pref.value <span class="keyword">as</span> preference_value</span><br><span class="line"><span class="keyword">FROM</span> users_with_preferences u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        jsonb_each(u.preferences) <span class="keyword">as</span> pref_data</span><br><span class="line">) <span class="keyword">AS</span> expanded</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        pref_data.key,</span><br><span class="line">        pref_data.value</span><br><span class="line">) <span class="keyword">AS</span> pref <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h3 id="场景-4：分层数据查询"><a href="#场景-4：分层数据查询" class="headerlink" title="场景 4：分层数据查询"></a>场景 4：分层数据查询</h3><h4 id="问题描述-3"><a href="#问题描述-3" class="headerlink" title="问题描述"></a>问题描述</h4><p>查询员工及其直接下属的信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> employees (</span><br><span class="line">    emp_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    emp_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    manager_id <span class="type">INT</span>,</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="解决方案-3"><a href="#解决方案-3" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    mgr.emp_id <span class="keyword">as</span> manager_id,</span><br><span class="line">    mgr.emp_name <span class="keyword">as</span> manager_name,</span><br><span class="line">    direct_reports.emp_id <span class="keyword">as</span> subordinate_id,</span><br><span class="line">    direct_reports.emp_name <span class="keyword">as</span> subordinate_name,</span><br><span class="line">    direct_reports.salary <span class="keyword">as</span> subordinate_salary</span><br><span class="line"><span class="keyword">FROM</span> employees mgr</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        emp_id,</span><br><span class="line">        emp_name,</span><br><span class="line">        salary</span><br><span class="line">    <span class="keyword">FROM</span> employees </span><br><span class="line">    <span class="keyword">WHERE</span> manager_id <span class="operator">=</span> mgr.emp_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">) <span class="keyword">AS</span> direct_reports <span class="keyword">ON</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> mgr.manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;  <span class="comment">-- 只查询顶级管理者</span></span><br></pre></td></tr></table></figure><h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="1-索引策略"><a href="#1-索引策略" class="headerlink" title="1. 索引策略"></a>1. 索引策略</h3><p>为 LATERAL JOIN 中使用的列创建索引：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为 orders 表创建复合索引</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_orders_user_date <span class="keyword">ON</span> orders(user_id, order_date <span class="keyword">DESC</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为 sales 表创建索引</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_sales_product_date <span class="keyword">ON</span> sales(product_id, sale_date);</span><br></pre></td></tr></table></figure><h3 id="2-查询优化技巧"><a href="#2-查询优化技巧" class="headerlink" title="2. 查询优化技巧"></a>2. 查询优化技巧</h3><h4 id="避免不必要的-LATERAL-JOIN"><a href="#避免不必要的-LATERAL-JOIN" class="headerlink" title="避免不必要的 LATERAL JOIN"></a>避免不必要的 LATERAL JOIN</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ❌ 不推荐：不必要的 LATERAL</span></span><br><span class="line"><span class="keyword">SELECT</span> u.user_id, order_count.count</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> count </span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> u.user_id</span><br><span class="line">) <span class="keyword">AS</span> order_count <span class="keyword">ON</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ✅ 推荐：使用普通 JOIN 或窗口函数</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    u.user_id,</span><br><span class="line">    <span class="built_in">COUNT</span>(o.order_id) <span class="keyword">as</span> order_count</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> orders o <span class="keyword">ON</span> u.user_id <span class="operator">=</span> o.user_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> u.user_id;</span><br></pre></td></tr></table></figure><h4 id="合理使用-WHERE-过滤"><a href="#合理使用-WHERE-过滤" class="headerlink" title="合理使用 WHERE 过滤"></a>合理使用 WHERE 过滤</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ✅ 在 LATERAL 子查询内部过滤，减少数据处理量</span></span><br><span class="line"><span class="keyword">SELECT</span> u.user_id, recent_orders.order_id</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> order_id</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> u.user_id </span><br><span class="line">      <span class="keyword">AND</span> order_date <span class="operator">&gt;=</span> <span class="string">&#x27;2024-01-01&#x27;</span>  <span class="comment">-- 尽早过滤</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_date <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">3</span></span><br><span class="line">) <span class="keyword">AS</span> recent_orders <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h3 id="3-执行计划分析"><a href="#3-执行计划分析" class="headerlink" title="3. 执行计划分析"></a>3. 执行计划分析</h3><p>使用 <code>EXPLAIN ANALYZE</code> 分析查询性能：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN ANALYZE</span><br><span class="line"><span class="keyword">SELECT</span> u.user_id, recent_orders.order_id</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> order_id</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> u.user_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_date <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">3</span></span><br><span class="line">) <span class="keyword">AS</span> recent_orders <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h2 id="跨数据库兼容性"><a href="#跨数据库兼容性" class="headerlink" title="跨数据库兼容性"></a>跨数据库兼容性</h2><h3 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 完全支持</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (subquery) alias <span class="keyword">ON</span> <span class="keyword">condition</span></span><br></pre></td></tr></table></figure><h3 id="MySQL-8-0"><a href="#MySQL-8-0" class="headerlink" title="MySQL (8.0+)"></a>MySQL (8.0+)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 LATERAL 关键字</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (subquery) alias <span class="keyword">ON</span> <span class="keyword">condition</span></span><br></pre></td></tr></table></figure><h3 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL Server"></a>SQL Server</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 OUTER APPLY（等效于 LEFT JOIN LATERAL）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">OUTER</span> APPLY (subquery) alias</span><br></pre></td></tr></table></figure><h3 id="Oracle-12c"><a href="#Oracle-12c" class="headerlink" title="Oracle (12c+)"></a>Oracle (12c+)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 支持 LATERAL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (subquery) alias <span class="keyword">ON</span> <span class="keyword">condition</span></span><br></pre></td></tr></table></figure><h3 id="兼容性包装函数"><a href="#兼容性包装函数" class="headerlink" title="兼容性包装函数"></a>兼容性包装函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建兼容不同数据库的视图或函数</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">FUNCTION</span> get_recent_orders(user_id <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="keyword">TABLE</span> (order_id <span class="type">INT</span>, order_date <span class="type">DATE</span>, amount <span class="type">DECIMAL</span>)</span><br><span class="line"><span class="keyword">AS</span> $$</span><br><span class="line">    <span class="keyword">SELECT</span> order_id, order_date, amount</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> $<span class="number">1</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_date <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">3</span></span><br><span class="line">$$ <span class="keyword">LANGUAGE</span> <span class="keyword">SQL</span>;</span><br></pre></td></tr></table></figure><h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><h3 id="1-使用场景判断"><a href="#1-使用场景判断" class="headerlink" title="1. 使用场景判断"></a>1. 使用场景判断</h3><p>适合使用 LATERAL JOIN 的情况：</p><ul><li>需要为每行主记录获取有限数量的相关记录</li><li>复杂计算需要引用外部查询的列</li><li>JSON/XML 数据解析</li><li>分层查询</li></ul><h3 id="2-性能考虑"><a href="#2-性能考虑" class="headerlink" title="2. 性能考虑"></a>2. 性能考虑</h3><ul><li>为连接列创建索引</li><li>在 LATERAL 子查询中使用有效的 WHERE 条件</li><li>避免在 LATERAL 中使用过于复杂的子查询</li><li>考虑数据集大小，大数据集可能需要分页</li></ul><h3 id="3-代码可读性"><a href="#3-代码可读性" class="headerlink" title="3. 代码可读性"></a>3. 代码可读性</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ✅ 清晰的格式和别名</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    users.user_id,</span><br><span class="line">    users.username,</span><br><span class="line">    recent_orders.last_order_date,</span><br><span class="line">    recent_orders.total_spent</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        <span class="built_in">MAX</span>(order_date) <span class="keyword">as</span> last_order_date,</span><br><span class="line">        <span class="built_in">SUM</span>(amount) <span class="keyword">as</span> total_spent</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> users.user_id</span><br><span class="line">      <span class="keyword">AND</span> order_date <span class="operator">&gt;=</span> <span class="built_in">CURRENT_DATE</span> <span class="operator">-</span> <span class="type">INTERVAL</span> <span class="string">&#x27;90 days&#x27;</span></span><br><span class="line">) <span class="keyword">AS</span> recent_orders <span class="keyword">ON</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">WHERE</span> users.is_active <span class="operator">=</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h3 id="4-错误处理"><a href="#4-错误处理" class="headerlink" title="4. 错误处理"></a>4. 错误处理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 处理可能的空值</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    u.user_id,</span><br><span class="line">    <span class="built_in">COALESCE</span>(recent_orders.order_count, <span class="number">0</span>) <span class="keyword">as</span> order_count,</span><br><span class="line">    <span class="built_in">COALESCE</span>(recent_orders.total_amount, <span class="number">0</span>) <span class="keyword">as</span> total_amount</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">LATERAL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> </span><br><span class="line">        <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> order_count,</span><br><span class="line">        <span class="built_in">SUM</span>(amount) <span class="keyword">as</span> total_amount</span><br><span class="line">    <span class="keyword">FROM</span> orders </span><br><span class="line">    <span class="keyword">WHERE</span> user_id <span class="operator">=</span> u.user_id</span><br><span class="line">) <span class="keyword">AS</span> recent_orders <span class="keyword">ON</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p><strong>A:</strong> 分步执行：</p><ol><li>先测试主查询</li><li>单独测试 LATERAL 子查询</li><li>使用 EXPLAIN ANALYZE 分析性能</li></ol><hr><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>LEFT JOIN LATERAL</code> 是一个强大的 SQL 功能，它突破了传统 JOIN 的限制，允许更灵活的数据处理。通过本教程的学习，你应该能够：</p><ul><li>理解 LATERAL JOIN 的概念和适用场景</li><li>编写高效的 LATERAL JOIN 查询</li><li>优化查询性能</li><li>在不同数据库中使用相应的语法</li><li>避免常见的陷阱和错误</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;h2 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#概述&quot;&gt;概述&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Basler相机网卡驱动配置更改</title>
    <link href="https://silencejql.github.io/Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9.html"/>
    <id>https://silencejql.github.io/Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9.html</id>
    <published>2025-08-11T05:06:25.000Z</published>
    <updated>2025-08-11T05:19:58.323Z</updated>
    
    <content type="html"><![CDATA[<p>解决程序拍照时软件<strong>网络占比高</strong>或相机拍照时偶发<strong>丢帧</strong>问题</p><span id="more"></span><h2 id="问题确认">问题确认</h2><p>打开网卡配置检查相机对应网卡是否为<code>Basler GigE Vision Adapter</code>驱动, 若不是则需要更改.<br>如下图中<code>PLC</code>网卡下方显示为<code>Intel</code>驱动, <code>WBH_LF</code>网卡为<code>Basler</code>驱动</p><p><img src="Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/%E6%8D%95%E8%8E%B71.png" alt="捕获1"></p><h2 id="更改驱动">更改驱动</h2><p>选择对应网卡进入属性编辑界面: 属性-&gt;配置</p><p><img src="Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/%E6%8D%95%E8%8E%B72.png" alt="捕获2"></p><p>属性-&gt;配置-&gt;驱动程序-&gt;更新驱动程序-&gt;<strong>浏览我的电脑以查找驱动程序</strong></p><p><img src="Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/%E6%8D%95%E8%8E%B73.png" alt="捕获3"></p><p>点击: <strong>让我从计算机上的可用驱动程序列表中选取</strong></p><p><img src="Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/%E6%8D%95%E8%8E%B74.png" alt="捕获4"></p><p>选择: <code>Basler GigE Vision Adapter</code> 后点击下一步即可</p><p><img src="Basler%E7%9B%B8%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/%E6%8D%95%E8%8E%B75.png" alt="捕获5"></p><p>将所有相机网卡改完后验证问题是否解决</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;解决程序拍照时软件&lt;strong&gt;网络占比高&lt;/strong&gt;或相机拍照时偶发&lt;strong&gt;丢帧&lt;/strong&gt;问题&lt;/p&gt;</summary>
    
    
    
    <category term="BBK" scheme="https://silencejql.github.io/categories/BBK/"/>
    
    
    <category term="BBK" scheme="https://silencejql.github.io/tags/BBK/"/>
    
  </entry>
  
  <entry>
    <title>Motorola解析赋值</title>
    <link href="https://silencejql.github.io/Motorola%E8%A7%A3%E6%9E%90%E8%B5%8B%E5%80%BC.html"/>
    <id>https://silencejql.github.io/Motorola%E8%A7%A3%E6%9E%90%E8%B5%8B%E5%80%BC.html</id>
    <published>2025-08-06T08:33:59.000Z</published>
    <updated>2025-08-20T06:10:56.043Z</updated>
    
    <content type="html"><![CDATA[<p>Motorola数据解析及赋值</p><span id="more"></span><h2 id="Motorola格式转换">Motorola格式转换</h2><p>字节顺序: <code>Byte0, Byte1, … Byte7</code><br>bit位顺序: <code>bit7, bit6, … bit0</code></p><h3 id="Motorola-LSB"><strong><code>Motorola LSB</code></strong></h3><p><img src="Motorola%E8%A7%A3%E6%9E%90%E8%B5%8B%E5%80%BC/LSB.png" alt=""></p><h3 id="Motorola-MSB"><strong><code>Motorola MSB</code></strong></h3><p><img src="Motorola%E8%A7%A3%E6%9E%90%E8%B5%8B%E5%80%BC/MSB.png" alt=""></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">ulong</span> <span class="title">Motorola_Get</span>(<span class="params"><span class="built_in">byte</span>[] data, <span class="built_in">int</span> startbit, <span class="built_in">int</span> bitlength, <span class="built_in">bool</span> msb = <span class="literal">true</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//处理格式转换</span></span><br><span class="line">    <span class="built_in">ulong</span> longData = <span class="number">0</span>;</span><br><span class="line">    data.ToList().ForEach(b =&gt; longData = (longData &lt;&lt; <span class="number">8</span>) + b);</span><br><span class="line">    <span class="comment">//计算移位</span></span><br><span class="line">    <span class="built_in">int</span> move = msb ? data.Length * <span class="number">8</span> - (<span class="number">8</span> - startbit % <span class="number">8</span> - <span class="number">1</span> + (startbit / <span class="number">8</span>) * <span class="number">8</span>) - bitlength : (data.Length - <span class="number">1</span> - (startbit / <span class="number">8</span>)) * <span class="number">8</span> + startbit % <span class="number">8</span>;</span><br><span class="line">    <span class="comment">//计算屏蔽码</span></span><br><span class="line">    <span class="built_in">ulong</span> mask = (<span class="built_in">ulong</span>)Math.Pow(<span class="number">2</span>, bitlength) - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    longData &gt;&gt;= move;</span><br><span class="line">    longData &amp;= mask;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">return</span> longData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Motorola_Set</span>(<span class="params"><span class="built_in">byte</span>[] data, <span class="built_in">double</span> values, <span class="built_in">int</span> startbit, <span class="built_in">int</span> bitlength, <span class="built_in">double</span> factor, <span class="built_in">double</span> offset, <span class="built_in">bool</span> msb = <span class="literal">true</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//处理格式转换</span></span><br><span class="line">    <span class="built_in">ulong</span> dataSet = Convert.ToUInt64((values - offset) / factor);</span><br><span class="line">    <span class="built_in">ulong</span> longData = <span class="number">0</span>;</span><br><span class="line">    data.ToList().ForEach(b =&gt; longData = (longData &lt;&lt; <span class="number">8</span>) + b);</span><br><span class="line">    <span class="comment">//计算移位</span></span><br><span class="line">    <span class="built_in">int</span> move = msb ? data.Length * <span class="number">8</span> - (<span class="number">8</span> - startbit % <span class="number">8</span> - <span class="number">1</span> + (startbit / <span class="number">8</span>) * <span class="number">8</span>) - bitlength : (data.Length - <span class="number">1</span> - (startbit / <span class="number">8</span>)) * <span class="number">8</span> + startbit % <span class="number">8</span>;</span><br><span class="line">    <span class="comment">//计算屏蔽码</span></span><br><span class="line">    <span class="built_in">ulong</span> mask = (<span class="built_in">ulong</span>)Math.Pow(<span class="number">2</span>, bitlength) - <span class="number">1</span>;</span><br><span class="line">    longData = longData &amp; ~(mask &lt;&lt; move) | ((dataSet &amp; mask) &lt;&lt; move);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; data.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        data[<span class="number">7</span> - i] = (<span class="built_in">byte</span>)(longData &gt;&gt; i * <span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Motorola数据解析及赋值&lt;/p&gt;</summary>
    
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/CSharp/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>BBK根据CAN通讯矩阵读取数据示例</title>
    <link href="https://silencejql.github.io/BBK%E6%A0%B9%E6%8D%AECAN%E9%80%9A%E8%AE%AF%E7%9F%A9%E9%98%B5%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E7%A4%BA%E4%BE%8B.html"/>
    <id>https://silencejql.github.io/BBK%E6%A0%B9%E6%8D%AECAN%E9%80%9A%E8%AE%AF%E7%9F%A9%E9%98%B5%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E7%A4%BA%E4%BE%8B.html</id>
    <published>2025-08-06T08:17:43.000Z</published>
    <updated>2025-08-20T06:08:23.760Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="e203a73a52311fe5fc51678c247facd572b0d1fde883da520c294d2761be07e9">2a136ff4e8d63812c42116b4c696cbbdf927869011249cbbe185b2d66c546651f08eaaf347bcaf07150041926a287a2c5066e85d8bd79371bad019c40abec8f718f3786de97cf44c74ce43642e58bdee1a822f020d307e510a73f49fc57d41fac2cf4627f4c60f2e4925fb7e3d35b794b9c9eaf531cb6d289a78a7507a34f5dcdb6d8d85c2d537981b524dea9ddab4aaefe8a384d39fc71cc0a4af839944d908344e0d4c697e4d26650014696cc4ba808079e411b3f5ee215a54724f85d14f70c755dc646151cb7153da1466bef6d487b7028d1ade7dd6e6f26d677170fe7902432ccf819059b2808cd9d99469ec6db49cdcae305f4f9cc1327e5c3278fc9904521a8faa2cc11a934b9f19e5f43a14dd5cc202b794abdc01f66a28af5cec322a4a80cc27aba111f6260e48653aefe93f237200df29f3c1bb3641f245cb422ee343b6aca2d837440c43c2e3291d24cd5ef25951e601e7d08fe0bb7b72a1d9e7769e2ce25e4980b7d4017a096913a74dcd36149ee6cbeaac3411310bce3223b9bdf7c4bf6f0b037fa806c324c3003b0b81aa0bbd8852ebe526e1e5ff5feb91a5ef0bf97a575d58d03172d18e17f7866847429ebdc7612b3917b170e488cca51c664e41a1282af783b29e95adb6799dfc0c1ed2173a3f335c8c7291216e27950e068858e08f79450b049f10bb09b19d46fbda327b88e29942df056991c02da90d5fd4a912858528569bd2a3e74029180884f0c0ed69263c16772a883f6c44535c1eb9f6d2311f6122f18f29dd00372ff74dae6afc56a985051ea714d8b095d9448abd77da0661b8fbb3dbeff740f0d8c1b07bb8dba48e213abdd73939f62d44b0d68da75d1326bec8e579898226a1743483010d687a88e75eae413ece96e0fa6e980bb9035dd629e9381d44c648b332885fc56c40dd0fc9e586170ee11c34eccac374549a0e9b54ff611a17e36dd84272f15a7a33a09b49b1f5ceee76c6dc45a158a30bf017905710174547714eefc96553a2099a21d6ebcf9384d8eb153bbca2c7ec065a1ceb8843cd32ba3311cd9624f0df42bbbb62cd3d70b9e909fdb53deaf9bc87a8fc414878bbe271de7de2b63c755a5b6da2b9c11d47a2e01aafe9801b60c9f5295277a2b93877b03011d32c86858f596fd53b501f2b850b98d398671abd14314238d33ab189d68927ba2420c1dc11c4a4e3c3fb5577346992e92a0db0e1bf15bd142773e258ada66c0665f115d9c7d03f00249b2dc5daec7ba8534964ae4759316d602abcf01abee13ab234e1968564b4dc7daa0f9dae7fc47d98cb6aa9d2d0af257e2b8673d8b9cf4c1bb10bcb2cd100ea35cf8330f2f6a6a0e51b9e3f9b0e5db4fc94cfc7c9bf59411da9f06fa4531b09f4a8db178fa7ff9b009fe6377788c0c6a3d7ebb1c1e3cd481d64208d1aaaaafa936b1a0b9c5b04d25298927d5dd0e9895cec241fe7e097e77c44c3a85f517680040f4ce14c355932dd043013e0a50e4772b39c570da06af7cf1a2ef5541f5c4eea64ec9584a0171626fdcabb0bf40ad2a2187a7c5fbaba2fe2fa9da77470606beb71240e51def6d852ab2b179458cd8994f4a842583d2aa6a4e063d12d271c4455295ce0005221bf3ecac5673308dcffb1fc78e99db67719e180a5f921fc956a3f0aace93931788654c4ce92eaae0caa5341420bf7e990383eeed9477ba6fe228d6ce210f38666428ab94ee0d38fb1f07c8c4c34b80f5f37af1d100887f209f3203e3bdf6f5a51fb6ead4b062a0a01a10a7447e6aaad7825ad80613daf79af5f63d9a112f30748e82c721ff9fd50c94223ded51a68b11126ab503e7b06f4c51635042dfb599230742c1de0a701a6889f27307946c61b50124e0bd81437dd946037df67bd03a290e4627d121a909fc576a2b0bd4832a1fa03a99f42df2db8eed3e9a9ebac692b2d3ec05450ce2f0839ccb7cb0b31bc91564c574208644e72a10aab566cdd406bfbe85c5f3480711d57a2dcaa56232d30a327e35d4002f40237e9dd646c37d5bb5c1d06b91fac387f8ddc2aea8cae30e1859c221d82e587627559729344658bcb8363ad95f1391727a69fa0c9474b161eeac94a967c45885e8d28cb803817c15550f9332ac2d1b1520080d140f683d9cfba99b126a3da6e9653a0dc020782b0b82edaa1b482e79712961895d40f790350d1689b2b5709813faa6b9e65713b8341391ad8c87d3a59433c700f33cd8f0fcab47d08e622ec69c6d4b91fca08da5ff27a51995f629bbd60d35947ead4c3fc7871853608f377c6a3bee04700c760ed043041199cbf9c9c231890ac5f96c2cd0b7ddb341c3c799a1c85d544e93bb71ce9c70c24236ea378bf767dc660f307d8672e51e7ccf4bb3efa5d84f3945a853fc3990d364e68a92e184b414af9ab2d3688fcd1d241be6d778bfc892474275bb34b03a1f98b4166ca936ec095c208a8ee8f9e3005a64e1c49effbaf674ea77dfb2cbdd5d9269ec6a00d8080379386f05de7f7bd20f2b400783be885164d96f56217c4599c68e54f54925ba57b78f71ee1ce3dec074cc92afa25d685a36b2fef627b0abfc8819423dcd7d8cc3c9252008419d6619d66987cdf2c8aa0d93051daab009bc5530ffae47d3dd4cd5111b10f32a280a65c418f6bf0b99281f619e7f3e0c8379a8427ba4fe66d7bede1286d835e32433c508c45ef6ebada2598302507be6b0e9837ecdea6c625d32735424bf8eb212dfd92725a88bc9d7e332aa98ed471108e021453692b78d812c7cdab80ee2350be54a752f3db6d5abb25179606496f4de90f99b1116a0334034c8672991d424c69da2211ca3b682b44b8676a70df1cbd22c3c27d812908fa9cd4a2eb9f005ac6b3c086e81eeffc98bcb84a78c3e348d2bfed3a0eb5c142efba177770c0b9caafbed0fdfc9ba958a7b5a3ae77b0addb211d3c61c8c584c6d876e663b53472bd78258dd5b57396ce7b103b4c720049f8529d3b3fd7fa5cec911176ae9bee9aca762a765fccf61bdcf4d4e2fb2b9d1cd17dec33e523ad45bfc275eec1a96a0207d4f29540388f751aa3d1857e2047a6b9b927c8a8d47c87665f2277802409adc4a972ca6d52973b938b6b1f0b7a835f53ebdbcba38d923450e9f260713d8ca9c8e31a04b4ac826873b170dac2c4a0939bf4fe1686ec361abb6d239a6cfcf3e05be26c8c80b7faf2df4cc662a1c38b5ac66ecaefe8f68f6bf30205a63d2deb1261cea4b2b848a5c69890ab6f49837081f5d6a43307a73a37717a7c5c0683ab9164f5d6598a6cd176a06e23b5012ddfb85aec22a9614bad67f48699a636cd7337306905a796dc2616ea95e159d4f7e8d684aca5c60e7f47aea1bc4068192b800fc4023fe1ed07f179712fd60aa2a1310c977a8fa0286f3c98960b380e46e30d25a66f1eeb21c777d024925d004bd752553e00505c7480e6dd2731fcdfb2ebaa82af32679d977418f4669ff453f0588f75a3e729d548fd3a386ddfec51ffbae73f68e48fb364202d5b0bc7df7b03aeae47127b5d1df1565fc0fbfcc0b02497662b1701b8814882e7533d4167b28cc26520a154dc907bcd28d65b295b7694bcbd2c15139c715c3bbee770ee9af395881e2fc17ea7bca3b03ab8dc2ac08a115cb3f97ac1329a9da7adb4c9c4ebf89830b3cdc9b8cfa921cd68a0ea86f183df7e53d79e8e54b2db9451246da9d53838899a003ded89618ff460288afcf2600acc0fd28b5489ea7efd5e74a65aeb3b32781a295b9ab740b6a74e7a7514198c26a5c1262feef3eb3d4269330cc92475279d744f3c588bba0fe90b127a6e95654ac007c511587cd42a5c8b0ac3348df042894c78e8d2bc6863475c19f2d9b78666869a1572d5071fea31b1841c9428c1d282f848a29edb0ecc315efbc54b252e11ebd137262bd7a15323f022477e47948cdc57da4aa368c78df290bc07b011cd586ad8c4629f546e691ddbb1279d59fa88ff67cdba24da4dc07fd993b1aca292c911565565e22693421c696a75dd8fcac6c6064e9ae5bc85dd71d4cbdcaf9c592c12415878cc0bc872e56e39fc2f507c96744ab435ae4db1b6124ab7219e8fb9b34f206af1b042581400c934946232fb0cd60c6e890d7702781dc062221542eb24b0a734329cf404543ea25b749bef494b573b460934ac064bb167e1d3d6376464c88f20ad9b8fa2abc25caed1acfbd7c60ffb149253a43c5c808a71b3f2ff3b7f73a0e8e1af4891657fbc9df9a341057dbb38ff90dcc5bc63c484500ca6f1f2f3634a34b8702c820c4ae3ffddd652457e6318550a08378f05efabffa7215cb1506562a68fe56f84eef4f8b33002f39227386f25b23da794cad5ef17a9e0a82af4aad6877a96be39648a9c609a8ff4550d11ab4b779d18447d7ae8e23751f18c3e50fc38b5546f4e1930d2445af7290bc279794888e75433738b26ecebf60db86ca2aad4ae478b56a5d4824e46d0846588f67ccceff52a7a0d8425ac7b7f97bb28ba8db0f3b3bc24ebe88aa9bd5391e9c353eb4ef9542adb1f5a2360108bec8644556f701e7e6bf4379e74f183419607cd93b32eb966a9fe715133f447a0ad62142928fe028dede291addb9578347064cb1794b326e69e900e7a3c0c9879da1c45a4815c5c2d372238e720ae2aa7ae781b792ef06c65ff7c87ead8173351ddc50c8568d363001b2f0d76c69849ffd78ea2e242d7ef1d1b5a81b66e98b826595cf23fe1e9baa9900d7cd779f341ccc3e4e6b529d8efc78ddfc39bd2c1daff1313749077ed57efd8f90a0c58b074ddb232ddf1023a5224e05a7e9df175a0a52b64c5c6f09379cd61ce8e05babfaedfff652eab8497e762b811d04f66f97cc174cc9764c97c4aeec569ec0f778aba18b16ed92906ff9980071284efa87caebe1ae4c0f1e15233a825300a37c9800298215347e8bc5b45c22c7c98fb71e12c97ca9b7f4709c9796a9bfd5e58a3cb3e3986b937cc6b715d046a8d77f37272e14bc78e14e9eee2b49e6fb81820807d03904acebb6ee93d25f52712766fe38b39b5ebc4323670635a0e5a1ea268d3acac95e3afa92136e3c9af3b74b3f54d82571805d627a1588466b34ebc72ec83b1af1168e3d8fe377962678693aaaffe06d96c6e0f7406c80cd3b48cb3f1c53c87c1fb921a6a9148f249d9ac561bf72c8cf1653a9efadaae075f17cf38be1d852bfb3c667cb0bc33406d71156823de913f29ec536df58728acfd761c57782df2695e4e11271c037709874692c2573fcfe636269be6dd530831376c2f309340ea3716639a7fe0d84c22d727568ee726959c8b7db0fc20f3d104fb3fe35fa50fc2e0eff93bbe7f97466bf6469ae40415cde12c28727a5a1712b815b2827e6ef592026451841d3c9b7d0ac201d92ae02aaa233d48179a6f53b7244a40e6e27f64a5cb1a923b23c10e33d75b04c89cbef7237257d34109972badd2660d6608eb6cfa347dff3c7e15576a38a33894e943772b430451f80b63aa4986c8a48926d0563bc869b750a3d86acc1e7624cc74d5b650166b60eb21f62719c0582603966a2d36e7bb618011fb39e61c2464c1c2ef2b0014e14593e3743640be362f33b79b47649a8acef1e93c12898d93f54d849e48463ee83210aedee93054b24d7da1f62431423cdb484e0ec3508f0d49b333df3d7fdeed2b54ae022aec76fef341d5838e385872d4898d385a4d69f506788f324da06e1bdc7de3f35a3f1665798733ca1816036289b9e6e83857441c404861356c5add33b62a614af5fb8e3bb347d622573f325128a6fbcd3e1785367fd7d6444af5bfd3bc00ef922481ffd97b1d9ef04ae8a1d8464bfbc869edca01e372a52a01fb2f85abfff3921c25da4ad95a650d489ca41810235fcec20a982bef88987a3d74ee500e212b4419bb1e1243761dc0a8013b88c3057ce20d732582a16c43545ac2c2e75a6a31f45bb742d4adceebab229aee2c57b88684d2e11766f6d0cbef3d60a16fafc03d3ec397f4f48801ceeec11b2bcaec8f6caee0494002ffb2a2ac0bfb56544f97cd1a1869f1e51fc3750908eb8a6c4bd795e4c98944a558ee4b6626be79e611f7252ba1e0fec85b4ec069e183e4936271a068c95f23bbab38fc81c71f6e89d0552f583a815a5d1c22707ab214e47e1990c9b32dce84776f0c939032fe8e4a244d9dd9cc3da0f293ba8686646fecd9d9ae501b848a0a34905904b967b67653e9c4d4d1c7472e394cb5cadf7d937b955519b0ac88238d34ab0cd51665b3f73b389c4eaef305a49a68bcc5997fad80e1f8017d56b20ef5f29c2d1dbce0b600029107595654ac45dcd2a7dcbe97187afce323ec1838c8c8d60815e5c67d3dd59f72ae7cb27b8bc46e90f63c716f819ed4017e1dccc497a01948cc810bccda204543aa509ba384df44bae65e2168f9402252b2c31d96ff62160c5a143f7032b2a1ec6972aeb8963a5c1383a4e15a0edd4bcc142a048d99e3852d8e49fbce05822c44e9b342e6e153a5101310c5bf4ace287a96d302b3bb70be8cac054dfb13f67c8029ce28bc7697ad1e6db5a805f08c22ae5ccd0bed390a413a86d6b03d27d8b1a35efd47d10dcc3c4ce4c9a6c5e4d4a7941d9d55ae049f7011330254b3542223c9378f628a2d606f1ec2899ac64d78f596c73847f72fb09ef88bce43c2af051f12a1c4ffe7160cc5e58d4208be6174e9605555c935ba3153c36f3cc5c0e9efc5dd36ea9c4967d08ecbdaa8094600d1578fbb2b60a9d719df509577a1090854b377654249b841fae29803913693ee557cfc23470b1e29acbb5852feef116ab29bf4ce1f84727f7b4e92869fca384ed931300fa73e41e1ab6d3848be18c2bb4025a91158506e50424146cd03e759564655e77480f4422ff6b1fdc5d75b7520ba5ccc579755384bf1429d6f73933a53c518c10ec0b348a296a31d9f96c9335807d26684016a672949a6785508ba1a399c763ee618293caa914ba2ba299c2ce9ead748c1bb51fc02d68db579d131fa9f5dd9f5c1b40dc3c181fe8511e671b5be0f3b93317f0f07dcc9a3cba1005d293d8422a10d335942ad4345e532b0e5cb0317696a6733d70a107387886365f694a5f9a2e9771153e5187be25be825234ee80dd73a5e0a5f58823ffbbf09eecb967738c92ff321abf71ea175c2f9368ba4bd272137e2857800285ce0148205fe4fba1c9c932a1ae06d56ca439890381cf5fb91a5908108b096485d3a240b84c786088c33b5894548a1532cdf9ce26ef403e59d1de4c375f95d7ce44b2f0d461dee55dba69ccbe04954f8efa909787196424869b1f3bca5a5868a4b067505d7226a9a0535334534243d4fad16dc665ee2acc2b7f706576c0197fe9a133eeba2a61c19e74ab25ebdc0174ffb7365c1cdcb7215e6af89c4e6ca70814edf94f8353d5065fef73c4dcfc1048789ebb63c91597be6f89726d5c67af2fb44a3253e47c5cf4294ebf81df825791112f710ca40fbe301a0d738fbe578918712427ae4f1c02c8c48f208a5ce22812610df297612fb52a54ea91fdd5fabe936f9215c57fb46ffe2811f71d136f1352bd3b02e235efc56dddc792a82d58bc977fb1b5c0dc3ac53266fefc280bc2fdc612b554c6da9085f609144261b73ae42808acba967f5621938ca68dbb1b4f1b4a34484612c16dd4180719fca6086cfd07fac0a8dd3b33db3dcc53b0116d8d1b8f9b6131862c428211d5240ef10ce1f07009a62468f1dc8356a474327d774a8fae60b5fc84203192a7d08fa746d13fe02dcdf1cfbd7ae9bce1d65e5a59f208d38971619d8ac297830b543711a96ffa64af9abbfa5131b028632a6aa5ee5f7d9b3b0f4e26fef25a6bbdd867273d7bf2c7e50cb7476181d4a778d542dbc4406194a02a8ecd1b9dc34a487632996954b6a199710d615ba3a60427fb4cd8e04c93591af1f005544255012bf3779141392e9c49638011d65f9934957d5137f9c05f50e7b0eb6598d65460917f658e30d0c8603e528eade057fe386daa352b0c56506b3fe870796873c36f9405e3ea47445d1f164b3de9a25f899918decdc4b10d958a7e5562a6d03f854b31b92dd1233761595f91b1c9f878bc99921851d5a87d89dbb3c059e4227c47b0c4ed7cd5a040e8f755e72674ba379c91e36dc5507ec28c9c9796433c7c6ae2108318751ff691e2884505d8359972e4cd0294b8afb24e8ae2a543087b38bb166ce83d1db3a50ce3c538522279012f1f37e28cb21460fd0b338931372578baa06757f53739b43d277b96f0caa4ae3cf2516b8979e1d5399401ec3c90db83805bb1deb084687ca441d39d03c3d2cd8069cc877863ede7ea0a27af0f24d3bf40b57bd4d6b3a7d09f1b146a21385007ccc22ec74c39a4c339a98442e1e4603b4bdac032e075f2ed389e804acdf7d881ca58fe2288acaba622623cb8fa0ef60045deedb6f8d4ccac27df292cec0012f7574127a8eef4864226ff42e68f1b153efd86670768e30045c93fcec694dc85516fc6ea1535b003736a6e2b21153cc32e3d7727fc5159168914fd57f7f45c1f96aff574a705e0d2392a814b3831fd30c80083592a46fb02a4a89745745f7ee829a5c00ee3491cf9e75e2e0d8d8c28bb1ea801aeea61f3ebd6c846790a652fecc4697eac6b886da4988a44f3f3f33894b8dea7b858ba6b0443c314c7dd08ca65713e81c4b5713ee070e009a0bef17421d1813dc1322a01579442abc31d261c737cb0376f5d26260b80384940f7004c9fddbb170e5d6aa93b95ca02e4e0e5a73041b675127291157f216fbce119ea593f75c562d7061d717c572713db76a2d224945386d4059cee36341564b186f6061b1c7fb1425c5cba47ba77f33557702bb011017f00ec93eff8e0850d255f8f95bdfc8156af201205c860455c270a79653c58fb41adfed805d8fc10edf379f8f486d9e6b707f2f81f8f253e705d937a433dc154e8348682a5cc87c343bacea3813b32f53ff6f034bc93311c83a98080716af9c1f1f7141aea2eb77a0ce33892017353ecf1d637f1e0c4535382a5f59338ee515de6d58ab83a5e9634aa920307022dc9f44e32d6de6e1e8514979fab491b48a495b33fbd0ea9a1535604f7378588f842dd92425fddd145322e1ff8c75d75fa7b466d0b4f8b8f2b41701609bdde65347b7f24f7c917ac9cdb1f7ed7b75c33fd53dc63ad1e2c68c42267f08c6212ef667a140794880703f5393c9b27e9f84e3d606c9368aa2c632b9836c32ebebc4f9248ef20e6e39ec4bac7b9b411d5cd3441be16122f5e9bb0071aff23b49642535f80e6ce2738e5b34097d6ca44e57ea24f36ec2b39551e6fd53ba5dbc7488aa6b8353edf6774387178ceb0b0657474f8f88217c59dd04971a85b201e09ed30407c8ef06d38056c7cd2f8d9d37850696337232219f0c0948b6b9fca3bf0604d0421dcdfa285dd1a2c12114ad9a5708c826ba2560272a819ca5ce4403c6c0b699a9723458e1bd70632bfe8c3d9b048d1ac21a2e3f509c15934fc641984603c9f4fb0aff8c20de41b5f3e66bf41a4d79a4b4829a0569ae21753695230cf7bce1ff8e87b58dc255a51fde4e45b35cd4f2159cbb13495fe4891090dc23fdd110065687c8f41018b95ad318dda877837d70fd9b01bd52364c714d991258bbf625779965627e66b4e76826755ceec1d44f2214ffffa61362d0e8ce39388ff54122e313df1c4a2be7341332b4d8fa14c540297a3e5f25bbe8715f8c162e0009ebb25d946461680b32346d198bbcd14d6571887b32f2f64f496c27a1a69d2ca99c922b7c1819d306e771f409522a14382eacc4892a38edffae1a83667e27644ccb722cfbc2c459bd38cd38115f5b2af237dc771df2d1db3174962432806e90a5f952b0e66431c921bab135db9e3b87d1d57e06ea51f0272128f06818dd1210388b89e08ca158e906b60e1f308ed88c1d4bbbd3208f9e2d10d52515c3057f060f599d3baa5c2306dc38db6a0c222ca6c9ef43306a9f906861765025befd647ba930b533dd87cab97d80c71f5a204beaa8a479cfad3b4073effcaccd1503bd2f80996c9438599a583312cf1e8665601e24c038557b4ff512777d639d654654ec612ee2447d4f0bd2f159a059f891a64d8ba02bfe53978ad854cbcd6d2e541fdcfe18c80754204834cc5ee430b40f99729cf9c4a183df88629fe3398e6e98eb88b0fc191d94f9d1cb0e8a9c178133580d95b305bba90f6674d0e50035b4ff982866da22deeb81db5e5fb7fc4904c2daa0ffa61ba443e2092f7f7f1a5fd55276a0bac01126688527c7adae0b69a1d09c450e2331c79172de0a5548e651a8e91cf22ceb3dab72bc4163aeb8822bb546d8867aae48c2b003f0df6ded046f994558d5116d4815b95c17c669cfd3f473cbad1bd228e4e86efabaa66d2bee1775793c3638f346f4ba794a9ea8bef8d680fc81d534ae7e086b0c514d9b2906a0d084ac5a44c1f7cb2bb514c8a94c810678d1b347108c611cc2ff14e9c3a0adba506e5d8ecbd96ce7bc9d7943a7fe009d12cb9f0144360ff8f11d694315d90feb13903d0e126902294fe7a8ee63fd3b00ff27d7990ac6a50de9a04fb08c9476f98e696f0eb0a06af2aa221bea77eb1bd584b617260c0b3766c6644a2b1880f4dc6685a2d6d5fb62a8468db2626b68cac439faef6369190ef8b53ee05179dbd313e5d12d25f5539a96d1c2341399812db28947653488950ec5c68a232478e91185cf8ec496175f08f089f25413a7a12ff7cd8a033ea779adbb346cd8e868212d3d58168ef037b15e7b9a307e96993a9479830fa4bf30b780e9f1712c6be741e033725bd25d0a822d0b335d7a0e50a14de9b2a273155809065bbb4c8cce57ebf799d719eba88b10a3311f138b25815aa51ee376b4fd29e1b4d8393c5a68b69dd716ea13b1c8790ff7ed445bab420377b3da224b793e288df91b33da652a366fd4d276927eeb1d08ac526c05279670c5bfd14d34a6fa1f8ef64b2d119956e34d7e841762b9f2bce7edf95c11dd4d8ec00ecde7a95fecf04f4cd8202cfb25e879391da7ed1597afb87b1f4bb85f49ad28b2321c25b861b50dcf92f5022be2aa36ebed74e57e0a40a53d9f8a69afb5372b376947bb9da12e9094f04ce0daa72d179a60c6396da8593fa7fd2fe0997cbb550d865cccee771f48e87f0475d497650d12fd1247a134eb26db2b974b202cce2e9d8dab004b63ad3bdd8ae54d165dd20b449a2f010fd9be582f0edee959fce25e7d8140939252ae0a86fd2a010a798e56f0d97cce878b41a81ec1ad668cca3de3039c8cbe54655c433bd3ddf0b8361de3df47e763607ae454efc9b454304c8b3e9927a17faefd78fd852882a0e940a45ff3ccc05f385418ac21821f7dac5bfd39c512fff57181d27caf20af22297b0e4e563ea16115ef7b2b238eda936d2a9966ead45efae0b1b448103a27f421dcb8e6c49a6660a1604a054f2c7e0abfcd521a28de7a34a085f1c74466df55bd6199e17d14e0701ee28286afaf93c3be742d764490212eba7096e7b42721c92aedecd6a58a35762f70433e4c6726d6fe3e68f1106d90b759fd6dabe1781f12202614d98d8f9ab01d5354dedc90e74fd3d5ce89b96098efcd5e4b6cf63c80b3112ae76dcad0f05fd8359a55ee08b960b614e8b65c22ace48074aa3f48cb85ba7d7993bf066fbc10ef72821e92069a6bc287ac406e3a63138f47b9f03adae113547d5cff7e4f30f808307aa0b6113c4feae16ca0f3cb98a1b08db5bc2646a6ecdce0e3308f2d8272aff591ee331d1701835389358c105428dda9d5ae6024eb06aea1c8e1cb2be0ec54eb2c6be1b9674ad74d7a1ceee710022f1fbaa18aae8940c831333d21e880a40466eb737db10a41b356f12a313bf3678e0c490290ef814ab047fa6296276185c91f9bfdd02ac873bc264f5b2d0026569701abbbc71678661c9502363280743c14aa7ac3965dd4faf123caa9c31e900c0d7ca5b6b9082f19ae797f9d2141654858b8791e77a0736c61cc08e062dac2cb737320b4ba198117e4aad463a3a8f18dc6050c35cda9c51f382ab59a13079b87cf7a5a43ba03e16d5432e3ad3af02a25c7326cb77d7c02764c7978d17a49277f2f3447ee2dc0e19bd8f0df75eb541372a5c58fb48d11e469dff346ccaefd77de08d52a700a46d32ca18e86b0aed487f7dacd4f57b752227fc26f8d4da0653d0508ad0ddc0e26363a9433bcc9b3a7e2d34918702a8dc2004f1c5594dae9f73a9ad0d2812514b627eb5814332a24fb66f807d378ae18ba55ab52ad36411d07d45f0b282ada8f82ef64371576c9ea9323493da0d5b65c9fd12ae6ffb65cc1666bd22cbc30bd48a455e156ab5e220dfc2a019c24d0900b86aa768be32f4edb9a00ac792c3e6270ea7dd5c4814f0a92b2687f8a3fec822bf7300e8118b297ab1fe4967877c5e163ba0e567bf5e7cbe54be6fad289b4dc060ccac70e41041fc2431fdc639daaaaf09947955758f34c64ab040dde3cbb4303f0647782c960bd8a206d6b32f5efc6f20cfa9bff6a43eb3c1871b5c21d0c0938c0e6f96aee34c7a04be444850f2d15c621351726289f54a057591898daf6778107de4215221d03db9b66c207c4bffa45382f795db825641d0d322eeb7e013d63295196fe9aa60fd7396a48706b0ac102fb1444272e025f617a932f0207bd229c5674a8757addb07565da5bfa7db8b06f83774203a618f5e107f5d5e332eed6efc6dca766b6ebde1786eb8d20c59b4952c746ab2a7995ca1fa938eb317db9afd2b4ff02687a25dd1b7b38acf148bf4aa9271c93b3158024ac1d2341af03a014281d3615dd20850843d826c40b1b7d02de0883b6295714eecd213f48f93f67ac405eaea439c7af5a10dc5f46ce65a1efb03e1b02469e9e5242a87c19147411d6989ae9799dd03200b99e9b6b14e77d7edd41058453ccb4631c1c7b7d77fdc865fb15b942106895e002ffcb2c1a8a7fce087662d43787afa4730d8d80ea147d11c9f3c6040281ca7bcf491e22b176e06be4d981e7fab91fc915e9a75a1762820c0aa6be5dd6a2267d6a425b7f0c5c2bc14a36cc61502ddcc16b34225b804c4c893e89cf31727b6118fe7bb5103507afead7aa63558b80f80f61b227b115f2f81936458bb05e5547262a84508ea4af14f16f4427ae7d71bacbc407aa5a0f6cc92a96b3e4df8ed5d9ca32aed435054a91e57411fcb09d27fc3228c5650777d9ddc083f9eb97cacc3ad7ef0b457eb2c701d5395b72b495f47916709605c733771317c21a396ca0337752c0753d637b4a22ead2042adbcb2939a027a52a9ca45ebf587c5c97ccf04d6db7ffcdcc5eaed67771e58e284f00b03f7fa56341599b5892799df981a732a18573e790dc14c0b07e1b20479b4d3fb401c8a908cf266bb1c16b9c9e88abec68606e3664242e0bb850f927ebdd2eaee17459f3c247a168e27a8eb6c0bdcf8b37622c46d6a4d53b2e7d83b40ab17e86324546ca49f39904de84c312279b8409af005ea0ec0b0df9180087df0cc82959ec0403a60d26b0b398e4a7055f7af64fea83c2637412f91b08685a47dc095293542f41a4bb853b53a8363af9bcc4a28b026afb297a45f6b253846f1b7648b3161e8283e03740c8adf84879a1461eef3fbdfd595fc56145be5c5c976042561d2f55349d3c4a46fea11d4ae0f15eb46b1998f5dcd36d1b5cf67b398897b57494448370236173acd5667211237679539824d1aa1c6f483d967ce5e97f12904f670e3754494dd458640364a7cd586cf39f2b2edf29dc976f565002f1e9ee99bb0246e8d8aa8450c59e7f89d24e8daf901303245c7e0416237d8b8ebddefbc054907d680aaabeebb5b393112df2752096424d9bb43ffc7402f6fba9f4206eefafca2163f3b0ebdaefdc5eb166afef2838e974053b7f4efa93f2150b00cc614de66bd5837b3809e3f2b267e474ee8cee2559effb3b149d583face940552db0e933816674a8b0118bf431ae38e4ce96d10cac9e823a53bacfc42daa9a6e959a9f973d8cf514b83b96a6ae07e5860cec6f69542aa4935b2bbc6f1920d583ef35802f582f1ec6ce7d035e36aeed81cd192b046896ab5cdbb5de1f12081b35b2f29f490a74dcf07f4fe7a06c9bda25389599cfbca0ebd2ae9a7b769c0eb067be1c5c147724982a4aa1a95bded9d763d040f05e6b47e892b1757f1d54bc829d1d7961e37253e6feef640e767d4a029b2923dbd2d0b812b009c802f392797bceaacba9348d8117577b49f76c6886ad81c9c80c35062f2c7076a621f60b92b311cc372f79150e64ad07a66794e3591a2a29475c437ff578dbc5466cd307aab02de8d5a8ea1e6fdd1e090f14838ff9c5c0c6232462e5febdf348bfea16abb21a309366290bb0974656fb2f17b883a44c5de4920f2d8db53939f33cdf83221acdb4e15b13c2964548444128543ae1227b21886c078ac4dc3093da6a89d385571bb3b04dd0a2d82633dc5db14567cb212b825d624b463ed5d73215b94f397f54debe2b60dc64e598b9b9c7e81042a912a6a5cc6cc73abf0328c0f574cb43bfdc82e7b8c38453b64096afc5b7f5d4a48e026329ac9b0b5722ee09251de2c40ea7e96ef2f4fb3fb1bac56e6e33cc91f5caffef8a0a5b36b2e316a922b3940aadba4261ef46a7260159b0c421f6073930703969649f8875c0d4e4777ae63ba1d68f91c5d7b205192fdf31ba3798a8458706ee79a86a1485000d638a1a618328b3fa84ced66bb84a252f849e6dee2f04046d46702f02a59ba2125b4ffff7a7dd679c36e958c9e6e56016bb2f94ed5896c4d2a78dd2c95cbc3c11e58cfb4fd3b8305ab16b985fb3ca8dd9165e490132444b95826da97f958805dd97d95279cdcefb2238124f1c6cdf189a8a47e290ebb0d73c8f42ef0bd169983e90f1b62817c474a0e83527a69a3a437bfa2a8056d28c5fb8267c67d9b7c6f382027e5992323901b7517d43156abb975071db1d7d0e1aad7cf37d5178234bfce1e50fc2d64e8046f3b9ea39081e3a9b8342bc9c15a8f9880730fbb3319422e5514649db4196b8b723f77c0b0fa7061e999e32920d0f55798139950ba8843a60d3c03a0246a4bdadc9d5fe181ff63e322a6e896e15dbba249d5b9542aebe70bfac452f5044bb039dce243a762ff875d74b7143908c4427550e68feb72883c37b8b821b313f55c693905daec300814b270e9bc446cc0d979bcdee5cb8c26fb52c5530b7ebe36cfeadc6280ff1ef189cf6809c3ace010bb042eae2aa61295c156cc2f030bc3de6310a0dc3ee9d71421c640896056ee2c60b9e861b817dcfa170eec89e345ebec80f73e4b412279dcaac0af8a06050836c2319127e2cd8b6e7d619a7ab74f25b1556f7c0b113f8325c33e3ad9305d9420d5a166d57138877f8bc9692eee438dda86aba1cc0f0682df1ed570d720951a820eb9861a3eb10db9422b96a54db96fcfbc78d99026b334957a91cbcc2ff990d37bae11efe0ad2286aa2a0a088b8d6792fb111bef5e8af8aca2c7dd61dafce3d8ff405212a67efcd3ad41bbbe154b947da4a26e5c85b5dc606c4443b949ad6832eb58c73602cb524c3e9f937cfd3b5d52ad08b05b0a3665a20222d1ca337a82532c3127b6367e60c1072df921151f238fd672211a8d73f7b18f3e5bb9f66093c5aca78ebc8f902919fe5e13aab5fa6144a1abbbd896c8bc6bb47ac8814b87e2a5a9743d7871643f9e9c02d6ea00d46eb4bd0b6f3486fb473b2343eb08dc84b1dc9d2c89858d2aa27886bf9f3eef3d395a38a22b8dc7364a6a9e1cf9b85e973b08dc09eac2d313bb1c316f2adb19c3553d82ecb8ea4bfdc6ca562fca044e0fd2dce3d71f5d3055785bb63bc840cbccc96541dfc07fbb66550a1cb45e4dd8ff7519e1a7f09e250399df671c7ee2b5d3a16d21d6eaa94f5112dc4be574737def07d52eb0ba5fc13adf8ac21cd15cf23a2230a8e3e6bd8af9421be1532ecc2dc7f4638c286e7a2e72f20167999559caa0d6fc2ffbb08370b2378ed83287155f447716d4d94201c15ec4b8ae757c54982305ed186be45e556732b570668fce1b26f6ee113de31ebcc6755b50b13acbfb2ce29c385b8612b5aaaf6f6eefd54eff5769fd825ed3fc1189f5e3b238cfa5117133904c82d322c116a5bf9c4a55da34d4fe2bfdbc6369d2b59e640d082244895efebffb875162eb0376aba4a2a42acbc5bce8dc59418e15a0b37b7ae0568cfcbcfbcbc9f5ba4edd6b993b60f854cdebf8a08285426471e427ba050f5aa556def1b15987d5d925ffdffeb6c92d106456ced0c202f398bc9aa8c926b4c1103caaebed5e179aed1327986bd278661e35b102590c5f9792e80d08d1e468ba424d669f5bcf12f493cce6c33cf6f905fef44a3c2dab0a414ec626b7a41dd6fa8f177db66be731daa6e0395dd346b99bed15456c850394c467a1ba76c399d84364f0e85551ee31b7e574fa9f9663ab74aa5e6f34c24754cba1680d81fd82393e702244b6290798c6ad0609b56ba73f720e8c7f6951ff276a3dfcb393db81fd57619eb3dd7b984c22774d793040c550a79bfb582d70c11c18917dbdda41868d7506e3bc2ee1f6c8ec75f440996f7654ed0ba60d742b22da8e71dbd34ced5b94d978c4c03dde39b68535fb08dcaea6e9080a4f0d36d64cb5783427133c9128554fa2791959bd92710c255207c25d4313ef549ca3e15c6eaaa1728629a8c41c571c447894cc8030469746290dd7893f3f36083b937ba1156e5f3061a94c752c3c582516e4c028a045fc38fc106d1241e1e503b982bcd52fefc4d20d3b7bec8405f7cdcbea70b5ccc7bfb36d416f0ec523b672414b102a20aa9621a53974bd1c8e9905ce06333d116745ef067bdedd66165f9a96e31919ba126ad4f96a3feb17fdd555cda388df38d3f53ad35fbe6f7d7fa1ebc9492c452d68a42240ce00f0b56db10ca9950627b2272a238da789089d1767eecb9cc55ea28dcab11eb17bf1316b35f6f29041786e3734c9a650452c15a2a2a6555a0543a05f8ad9d4adfb6a51554544b7da887167b42701747065c2532566a2557b7ca608d9a760c75c88035bd70d6f722f45689b4c5ec9c1273611be0ba0a5880ca891b9081e57f842685351012b89212a41caf2298a212cfbe241f4777049b8de123be7c814841f4aee34f856e52d9ba74608710bfd9d722e4d55c29c71c7d04c587a3fe3757c5ff4ff99482855efd71349160477b1264cd9378f719aaabcaeebe6d040210a914a2042783fd70bd08654b119630c5d135344a4b5dde163b4d9894583511dc4dcfc94b94dd89da9c57f508b9897e05086beeda92436b02ad3d7ea200a2aad33a62e7fca621f679a8ee3d4e67a43a41e23192aae25638916b0f447c0c75784f74f861b2bd0a6904798690361961aaa35b2c7f93042c346e7cafe048792c61e6eead1568d280f522269bd4fdfda5175e5f6fad7a751316523afc47ef003c7649fd895b9b4919f60ce7ee4d8c71c6c170ae163f916d7d27e1b9297bfef090326a065cbabc3b17749ae889b50e8baaeb991394ff659c0b87cebe9e035aef828e50b51591982c590b0b04332b7db2f0419203a67dc23fd1b6aa39d48ff46a4782fde7b45e0f1405ca8d36bb29b1d04480764f90c37c67282bd6e98039989fdc0d4e6ad91f993141d7bbe20bd116f40be1716f834d135d4ab9d814b05c04a63c859296cecce45d795bda47fe7e081f2a3b55bf55816e078df682269874e559e9ca62a0cff88288e9a486af542040dbe48bc9502963d7344a9b8c8a1b59c960438f9bb95e13d8c63a726cbf4a701cf6571b6e80c8066e2bcdadc3cab7b298f60a2e8ca574849c6e661a78dde322aeab5442216f146bdcade3011ec2ffd27cf786db127f1b702deb6f19fec09f60f1bbe94d054b3b690fb219aa10a4c6691091aeeb96c098d7cf38462f1c8444da81cf647327ad5939be6fc9e1646511939f4de2fde76fb515a121dac4824c32ae6e243724a92b619da13b52dcd7427b0327f9ccfb1d1b9663f11000984c0d3712f40591f69389a7546a803db7880a7947cdd65cbb36669f6363dbe57004e2818d3c871d5a507336f81afca0c7b915eaec1d239dceb41a0fe7394ff4b71c4a9f179bbbb1f5553117657b0fa71a16e9bea0a92ae49659677988e589ffdb4db945dcb23a549446b4d7702d48af4ade30ab3c4fcf4b089ae3af4dcf2762985538fa14406e9a6f008f2d51590fe3ec5458f65aada23b347943b1ba648eb4a12ff5125d50f46be2f10758bff0ce0f9f4c76003a37fb66a43a651102edf72497cf37a457e706d38643c21c421103ebd2b67468b551dd8525f4c85d4829a9eb8f9f88882ea25044fddfae3481dc2ce981196197e8f58b7905d7dfe56b7275f1152f30dd70edcb5425afb3554b1deb049fad2d1af3b28318ae8988ef0f82c708f45452be87f6d7ba3cf7cd47046976499656ad708ae02ecf7d2a9a04133269ff0a0db8f7ba756734a3d5dd8f58e2885debbf919e12d45ae3075b3285530d9bff65173a31104cd2d1de782e8bf26cd265399a391cf116ef7b4a429ba53de2aecb83a89d0ca9413e4a068ed809870f1213e2700066008f798f667f48085e890710fdb95c98d8b81a1498133be6d61e7872a1e2d22122aac5765268c9ce9adadbdecaa80de99e3720155aa32eed62745584be14aaa4859d091753c46b61f02ea0494f80c7c4ad19027b35739973e70bd92b2bd449d48c25d547819a1d6301a58bfd4d14f03bd8b4fb62e04a36f1d9e916730174471133c6a82b0eaddeec43cb2ed27fa04f0c2970a5375822490db54f3cd07293e5260302c9114cc913e63434ec627ef065323df45db2367f03a292fd2d456285f073198fdc21efb465be7d22a5db62b104206e9b3f03908dd9dd72dc638d1a91e082bad261c03c7fa27a3abc316758f145b0d6496d4dab281e8bcf991d06fff329771b3c1da5919ae3f262554be4b5dca5275d7cc6485fe4d0be6fb18248e76085c6bdc9fea385b5ae2f475e1000095ebd7d7b83add46c21d8a6eac66ec78344a33d91cd323cfd3d6459805760832c7019121828a289e04776f9fd49cf07f9cb8e16a1a09009002a3150d30869c2066e42d8d26971cda60b3e9800827163c7c9b9810fb4dc5aa1a8878429bfadf64ac4b858896b4f070831407b62367eda6562ed74a82193116f43eaa1fb3eda32d948e22b5247f093b9c19d1e574ac64d2283c1c76ec648d6785b98918b880fe4f772803740c104610fac9987d5357f5283bf82325079efc0f23518fa46757cc1e95c46f9f1f53f0742a78a11364ce24929747b2ac1da3c99203c9b6ae0dcdd168fbc084ffd1b840204f9307a1e2a8042d03c1087a7f7e892fd433716fd4c05537b37e4e3a78a5b42f4e70ccaebf3e04c10f37af43ea6621073686c19f710f50a15c0ed029b6be35ef65d7e9e87bb001eeb0d9fac644c34e842439d74e6553fefe0ed44021df437283e61eb95ab29d3e790395ecfacbe64afa520bfef1e7e3dce8f8c57c1d9041a24bf60b18171847bb5c27568bbd8b70bd612c3cdade7f1b9c590e3051831a398b1ddba4d7344b10fd577140a55b5722bef818cb96164f66eda56bec98b22c898866bcdd70665549a4d17263960795ec633cfcdeb8fea9121c1c22941e2f30d10908165c170ff049b3c8624483a358eb99c4492f6612a86485d1008e089410a0db8a4a40cf5c13e103076ccd46a37be1f3a8dfc28ef758cdf1c8853afc5c1e0e8a86732f31b587b470f3a8dabd40a780a41511d3f2f41755ff5d4f7be530234badbfb75f1180203d8e4bdd810204a53f636c67c2a8085bc8e3f6e0ecbf7b3353bbec38a38e3d204ec487cc6c856e6fa4ba4356d6078d70822c6a822d7b9cedd4b1b965e0085609f5bf1c0798e91bf0914c29ed9f61e715402e3e8dd8b5b1f22d980951e7e709f134fd765b3e6b2eaa14b4c78a8f7e918d35d2a55f4988930c613a241a4b898eabf577cbbddea8bc90a51a6c3aa6dff75e47bc179f837cdc53592a84629aeff83fcda8e4564d7ed0988c597d4ff5981ac82e348ae479c8347f4ca0dc9d796c2d3ef9ad344fcf14844a86e3aae54956eecaff72baac9102ab3a77e4a7b22bbf501eccbb34f0a447ebdc63009657228f0c638d5ebdc440ea9a1a5ec879a5a320f929c752f1591cf1d55d7b80d7e7db24330f7a59e7b0d3ace13973cd7c59c58c4fd83dff9a1143d863b0578814585937449a837752c2765132feef8446c90c495d8f8a3d8c649a4198bd7a6a9f115a9e4f0891455a7612c2c782fe9670f4f4311853512298e144c172c1bd125342157a36abb638f381791b7c84024cdeab3cf9e03f1472a015c7e5b4c87ac355d91f4da4edb4bd54d3b3703127d9b57023feb784d696f662dba90ced3f06a81dabbc758b55dc431db8b5f5a02cd683c62fb2f82448057dc9b0605aa7d06aac919a8092faf74cd8e077880879b18bc910b3fd77e2566d48e35b796b8fe6e2ffe7a355f0dd637a8821ea3e8220b4aeef73fe5aa2d2f41e44b35035c43b45f7ead5288985a5360ad06e4388026899dc2b12bae937dde4926b8df6e129b342cc7c82bc07dd423a6cd9a379da67fdd592c9ea39a8a0389cd1214eaa0ebb3a836875fb2a9cad699d315866532030c58a16fbeb0f4ed086c9010b002288eec079175f214ffab7292904964896f0402c5baa583349269c1b71c702620d64949d0b01466bb78296953b68162299a974244e85b3d8713e72ff94908bf4e8e523d4ef49e0feb515f4e2108f6645c4006c7e80dd6fb72ec9b4effb58346c0ca52c0312db6bf0037caad9fb9c0c2197dc9ed0654e32adc224bda6b23425770bc3662b86a7ac00292c9bd5b92b7a2b14704772563e4e5af44e47fabae7ad4db0560cc69362ceefef4b5f3ba85832d8f36e0dee32c0be1453506bb80a20ce14ee0abf90b9ec4c51b99b59edffe59485a9e6f77907236b608c23d689a56102a6d711f1573e3813ba267c228aa062bc9d089dc4468d46053c2e6592020b5ff7d0babb600fc4c8903ed034db5ef083c4abf15bf0d90e8914bdae65defcfba5091172fbf9a2e85dfa4324f80e0fc06be3ac55702b0a34279c04b7c5905953d1f854b966ec11dc266da879e2ed4bbc0dd58c0612c40ae53297744b368ddf54eb8238792db84056b6b19c7e36b8dff5bcaf14519973a54ac203124e33168905fd93bfe8db2a3a10f566cd45c0dc207d389fa68521bca92adb942ae5c9cf3be0fd2c722be63cdab9f1fdb6f0c9069eae42c728075ab61154f9a54be501213756db888e9b2e9c606ae743024ac515bbfa8fc7e11182d9fbb8e7cbd01825c8798c2052520b9d7cba5fac1a2b5d18b7da964bf0aafdd6bd7cb5b862ccc3ca9f2bd1aa2b2fc1f07dc078d7a946c97a6a576314ca1895fd6c3bb6d181e250c4183c09ea4484e92424a41e147db608a9935a164e63500074131eefddca64075121f138a7dc2c3be46e6445e11e47dbe5b990c4206b21b09c6ec8422f078cffc54fb990087a04f676ef2de3bcde45d549d27967982d845a9bc69331d8939a3f7f79ea2812820a5e76a86d4ce9eeb69f2ddad4e81b9d36eef1a9601612ce04dc3465e98cf2908c31d0b2896fec19d4b1a57de7138fb136271af47ce1bd8d2824a783b54adb6709dd7a3c0d41a7865a7d118ef8a0804d67f99ea68d9ad872f95c931592936944dae80e88dfe74ebcefceda56e2e371620573cda37fb8d43d4839e74e0e9a89382ea04b12b8a54d797e53eb932d3e9c14bf87cb20c5e4897fc7751e338a318ca41c6103c501d444163407795dcb1f98e8e1c36b8bac9aa2fa7aa733c6aa21d2e3c46f3ac24d53e64c55ab944063e1c56766bed36acd34d47a9b08dd4f82f8b86ac2101402c6c9a7476915b0f613c9698db39a468d50a9e315da43b839f65ae3069c6f946f2454555454e9b24fbae372741c00c0c00b10104d60195264e69fef5fa7c79622ec379bd36f5d78e606b0eb65e0d0fc8213fe4d00168cd61a706528a062e1d23961cb1fa4f03ddfa3ed6ae8aca01c499f8fa828ab8fc56e5eb82efca4b17a265f9c125ee6252c79c83ff229d7fb1408c44241e546dc545cb610bbffdf94025657a2f366a5840998ff2cebecc1fd1c7635726fbf59771f36987469f0943a6fef12591ea6563a79d3ea14b566085afe50981ffe7417269fc900d3b188652323e2188a764b00ca850069c37113ac1bbaed4864fb60143244a620745cbcd84e73d0d613e4ca78a48bccc6e3743638959fc39ff63503eeafd57cea3b091facf2e4e07689a1fd22146b0f732652377ec7bc781b128baf9d6cc79775dcaef72ad306110477df2a8c2b177002f8ef6c1eee5350e71eb789f548391401fd4c4db2aaaac03f794025931698bd7f6210b9347467f5e0a12c34140c33bafa936281267cce0e6f7bd242a3767ff9c02ab31a2406fe8ab845c0f3b81481666e7a78c42a93f6761de8708e97bc4091468020a96385b5decfa4a70f69ce2d15c67075e323ab4494c080466df21b1e3979a0370f2d9674f63d55e72002309151e026e47c060f4c828eeffd3ef930992ebac37fbc4e65e67eeff621b300908ec4bd3df1bd605d011d6666115186490a9e06ed35c411fda16f6db3a3e0c95bf6543d3dd167c88fb8327305f473341feec539de10528cdd98b42db64e000ea74f732120f661e8d705d88caa31ec275a179b7509429a58f6f6ec15db78c3a465ae34d5950a38693505d23fe675194373571ee57cf7066671de6bba7e16565bf3263e6e13e1d70ed8a9cd293252e8780e29db93bc43cf5370036fb20ed9db7115d2057be15141ea4b8c76222478abc6143e9d3b35f394a7ee4ce753939aaf9983566ef14b84e946024bd57848be51b287360d15a3e46326fe3b5faf95f318b71898101554c532f25f48ed4454ced8f1226897f461bc491b6bb29ef7bc082ac15da0a5fc988eaa6295924e558f2203484d1f99deaa11e02aa2490b46789e18900c4b6bf4ae1a121bbec4f466c54cbdffb587bbccc8147fe97a0032a8be95f3f938c70fd033cc6978c9569433cf541a20cf77702c7846eb33af974742fc3c679607b5d08fbea5a3c852d9fbe543ef5a3777ab2f7646e879d4876c3629dda89a0d42a5d944879a3281141e2dcd680cc1524de9530245f79458d749bdbd06322be2ccb818ae61e91de1095ef6e738742522403f778be3905e9717313cd030fe54300fdcc6104f25bbd4b972450570bd7e27cae82dd1bdf5dd64af0a297bf13a3eb5a55e866af603a2e1dc41ba24ea23db8455facc05a116b5de8652f4d0fcd2d4c50e447352b189e7d9a7bb3931aa878e50478f0bfd26f22c351229a47d276291743244ebbb9f5aee6dbe6bbfd05e4317f47bf35fef2a0d7e40b84d0b54a4e50cdab8c24c9df7bd1101777d296b751099f5231d85f8eb0f8f0af6d7afa87a5516eb659dd43d2f30858381f5c7e0193a47c53c1d5ddbbad0fcc211819c7b99677ef60d3e843d7175e16db2d536e8dd7906e5df872a597a054a06ce1cee0f221abf60d50bc01fb4f38cd457235d4c92385915d73d5b309be825771fd4fefa45c44976738037064dee3a7cb6190d3b2f03a40ce08ee6e5d8e372575ee33405332ea5909535109f7a96387ab857faf9fd7b5685e5bd25651e8da475be04d3bbf1ee390d3cc65369aebfbb37dee633421231401c0fd20261f7407d810344575b5b021b23ed81ad1cbf83d7cd53ec0bea480a6e235095ad331649876ebcb71ed5c3cedc71b9be7b96e7d2e9093dfd6452989aac17f0000a456acaa3c23546d84fc441485c3d3ab34a2eb6a5fcf090a18aa8b304d53ff8aa550e2bc92119a99cb4fda753ac3a0807d706a31ad80309266267db517b40bd452a40c9bfc64610aba1c5b73cec5552ebd5b7ec30da3ddac4d34c89d41f23255aafe3362788434c4f7c773e2e2093e60501472aab3b1a771a7aa4ce71f72ddb00ea609ee6add49f70fe8f213932fccddc43c18a1a061a16d7e2398e25746a0c0174257cb2f21be590712385d21ba13fcf68ba91a81df73909aa8539488e44912582dd42cc575002ae673006dcabada38d8189a9f6e404067ff5f2c52309e97264267dd710fff33817ca5902afc1dcd67e94a78f554c878f51a4337e8bd3e00c2b989f4cebf288268b13c3644125d733046ab2db6db0568ec7bb67c1a265d1e8256323386ff779446eb99de2e088483a05d8d1bfb85792df1a7ff8a01d3829b3f37224e02b80a484e24ad8fde365153670980f5507f62577ed086bc8477a0e52f08df30e40d63df01dd6a97c658eb030424f34b8226b6510ea6d755eafbb0ecdd2e29c13f4916b1603242d5e0fbefc5844828c3855cbc9dbe5487eb90a2f71a9330808e2163698936fcb53f26fcb25936d82ff596eda36ca5cdbc550ae522bd2f1d3ba9e2357aa086c34e1459110a536a24b1154303579979205c6f3600942976cd6eabec85f28c9adf9d0b3caf92eea4dfffdec2504505e97594a280c1113763299baec185650e0d9d96d982af6997956faea4c2f63d33efbbda89e7b5e3f5d8c1545dd78b2617d8c30365a99ff1b1c21881e59d53473ad2de0f573c1c34eb5bb79c74623fd27eacc6d2d1eaa44e5671ced10dd5a353e1c4b6be12ed9ff2ec48c4c0c376359aff17db18d9d1352385dd8f4675f919545ac609d68991551d0a98147565e3d78c35007fa2aa24d149bd47055ff39d286ef24fdde3bc74ecdd2f357577878e1a88c7456b01b4c8c80109ed27f13f4451945d2d398f171173bcf30a7612e5235b07641dc03221e12d86d26a61a6300a6d47dbd2a38df94f958ed6f8b1d897ca4adab94fa359ec3728b74c5238707afd99a87dc46922be54a3576bb2cd420cdfabd149981ffd60cb748f73d5324bec605a02f7d7c1ae677ed3e09be74063187f3b5e3dbe9d7c30762536039521d26eda16e41664cf376311fa99dc1704056b8813d85f4dcfda2f0155743e59132e60a31a407019a13218916e02fdc928eb523d853388b041ef46c619409b9e2825b9b7d8df78bacdbce338c0c82722e1e2825a1d711a89af07af512383fec71ed4671575632bac954885ee9af1d641ba4e7dfaa06466016603387ca8d7c855aa6be51a42ce53c58eb93b11946774241e6c6bf345ac7e8fa5c503d4a56741fc4d0de227d37947a2d746e2f820414c28cc7b39dda3b740ab722f857016e23d93de47034624d1803b58f098ffeb0b3be52e6827acbbfbefb858c11c16531900726af51558bd644c5520788e3f95febe11d4bfe4813fcf5d46b4ca71bc71b2acda8a7808f6dd7d33380cfbeff5ef096a89f137e32b78fb71f368cb15776580ff4b65ae0d725dec9f24d33317d770d040b118906d7f3cb4eabb7f0c2c5f2823b02bc813db6c48fba026ebf21471216c2684bb060e0d23d35a7e26b1fc316ac39c224153b00de555de1f4ae1c21e10d9c99086534349f0238ddb681e5d63a33a7cfefe6e5cc100ae92441bca0f6038b3fe0bac8f1af74f4b0b3ad11afce8b2b73c28910b8b589fad182a54d773a3dc2737a0bda3412aa7c672651068caa476cff9893327b2e10d65bd3694ee1f98163287cd4737b07163e3a871b7c7e258626ea41d796295815455bd81209653d17701f75e95ad11f000137f9f8f83c1a6d68dda8dfc0455b9ff1719889f5ddbaceae2b9f5c25a101604cbe023e44e6d4fa44c9ea016fc3cd30acf3acb5ac1860fd6af464d8948c19dc37612dd9324ff3359f8b8470da73c2baa8d8598b145ca90efc9fdc7d1d712e66d0f0228d95128d54ae4bd78a844807d8cea9f40358cbbf152a991de179102bad88ac2ea58bc5f3597ceb64fe9d480c83f27ba410ea4e3386dafa6c88481e96aa773de8f50bbd195f7ad148d22b989c880791cc248c8ff2c18d9035016ca352de2a9b8972165aaaaa36a91de9d6d59137a7f9c4bb124a4a5cfc47e076552f6d19dd3be24a7ed99a8e8e8af8336df5e62cd2dcd8708f75f23bec82f13c5e5f93b25ce71e66ab9580e3b18ee0e7a930200f596fc164cdedc59b4fc5c74ec940afe2c4fe5659f3ba17e1b881b54ab1904f359ecb24cc8dc217ac02301f97ff9b09a0ab129fc80b8ad2ca1c56eba62ef6b5fabb454ecf521042443d8b2188ba0e5ed69a3704869c9d27806f8b26433df0a61111d02eb463dec322e655d0c37d0ca48cadf7486351176c88663dfd7b3958998f537fae1fb9225dd4d3e71b59221ee62eeae9468055a8bcfb39b587c82249b4bb65ee49dfdcaf506e3aae52d85db214504e1994b4cb59010d0277aecae885220d28cadd61d610a0ee06765a3c9a9d55e19fc54a9d67afb1c3cd1c7adb9b8fa529aba411cc6779ce7382c7f8005e9540a3a01fc43908b1380f17c83fbbf4d309eceacd832dac57529b53f22173aaf8adcf967a7298af1430eb809f5967318dadebcc7d6b8d1116b801603230edc16b9aadfc2590c834617b85af0948e6ba7dff54ed08c8ea5ec0c2fb91785341c08d00ae1293f4763d0b75ac725f398e2e38251c70b3268e2109f4956a9ab33ff0a71b22e613e876ec6e6b64e0abf58a63fb6b875773f637984af54be2b7386d281afc82eed77c4e5669f4503aaa27a8f19e3b6ca084c425bce88cef1a2d53630cffca0c4ca453e47f0610bcda93f372f244f7e074cc9dc58c7fe2a01a39fd31843edded7c79ea57cb82d2b0812690b72d3c832dd7c2e03886c92af7febf4b577edfe3d4c0313b70afdcb990ef5543b9e225b87cd69c111aa3a21d760e8f65321067bdcd684460cd9ba0bbc17c0bcada287b57ce5b9f726edba9030b81582a8</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">Here&#39;s something encrypted, password is required to continue reading.</summary>
    
    
    
    <category term="BBK" scheme="https://silencejql.github.io/categories/BBK/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/BBK/CSharp/"/>
    
    
    <category term="BBK" scheme="https://silencejql.github.io/tags/BBK/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="CAN" scheme="https://silencejql.github.io/tags/CAN/"/>
    
  </entry>
  
  <entry>
    <title>WPF MVVM示例一</title>
    <link href="https://silencejql.github.io/WPF-MVVM%E7%A4%BA%E4%BE%8B%E4%B8%80.html"/>
    <id>https://silencejql.github.io/WPF-MVVM%E7%A4%BA%E4%BE%8B%E4%B8%80.html</id>
    <published>2025-07-26T12:22:34.000Z</published>
    <updated>2025-07-26T13:14:48.915Z</updated>
    
    <content type="html"><![CDATA[<p>深入浅出<code>WPF</code>示例, 理解Binding实现</p><span id="more"></span><h2 id="示例">示例</h2><p>功能: 实现按钮计算更新<code>TextBox</code>数据</p><p><img src="WPF-MVVM%E7%A4%BA%E4%BE%8B%E4%B8%80/20250726202642.png" alt="Cal"></p><h3 id="数据属性NotificationObject">数据属性<code>NotificationObject</code></h3><p>当属性被赋值时调用<code>RaisePropertyChanged</code>触发<code>PropertyChanged</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NotificationObject</span> : <span class="title">INotifyPropertyChanged</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> PropertyChangedEventHandler PropertyChanged;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RaisePropertyChanged</span>(<span class="params"><span class="built_in">string</span> propertyName</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        PropertyChanged?.Invoke(<span class="keyword">this</span>, <span class="keyword">new</span> PropertyChangedEventArgs(propertyName));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="命令属性DelegateCommand">命令属性<code>DelegateCommand</code></h3><p><code>View</code>中按钮按下等触发命令后执行<code>Execute</code></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DelegateCommand</span> : <span class="title">ICommand</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">event</span> EventHandler CanExecuteChanged;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">CanExecute</span>(<span class="params"><span class="built_in">object</span> parameter</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(CanExcuteFunc == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> CanExcuteFunc(parameter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Execute</span>(<span class="params"><span class="built_in">object</span> parameter</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (ExecuteAction == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        ExecuteAction(parameter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Action&lt;<span class="built_in">object</span>&gt; ExecuteAction &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Func&lt;<span class="built_in">object</span>, <span class="built_in">bool</span>&gt; CanExcuteFunc &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MainWindowViewModel"><code>MainWindowViewModel</code></h3><p>示例中<code>Cal``Button</code>按下后触发执行<code>CanExecute</code>若返回<code>true</code>则执行<code>Execute</code>, 在构造中添加<code>ExecuteAction</code>执行方法</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MainWindowViewModel</span> : <span class="title">NotificationObject</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">double</span> num1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">double</span> Num1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">get</span> &#123; <span class="keyword">return</span> num1; &#125;</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">&#123;</span><br><span class="line">num1 = <span class="keyword">value</span>;</span><br><span class="line">RaisePropertyChanged(<span class="keyword">nameof</span>(Num1));</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">double</span> num2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Num2</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> num2++; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            num2 = <span class="keyword">value</span>;</span><br><span class="line">            RaisePropertyChanged(<span class="keyword">nameof</span>(Num2));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">double</span> num3;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">double</span> Num3</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> num3; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            num3 = <span class="keyword">value</span>;</span><br><span class="line">            RaisePropertyChanged(<span class="keyword">nameof</span>(Num3));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DelegateCommand AddCommand &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Add</span>(<span class="params"><span class="built_in">object</span> param</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Num3 = Num1 + Num2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainWindowViewModel</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        AddCommand = <span class="keyword">new</span> DelegateCommand</span><br><span class="line">        &#123;</span><br><span class="line">            ExecuteAction = Add</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数据层DataContext">数据层<code>DataContext</code></h3><p><code>DataContext = new MainWindowViewModel();</code></p><p>指定<code>Banding</code>上下文即业务逻辑</p><p>如上述示例 <code>Banding</code>绑定的是<code>MainWindowViewModel</code>类里的属性名</p><h4 id="DataContext设置方法"><code>DataContext</code>设置方法</h4><h5 id="1-初始化时添加">1. 初始化时添加</h5><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MainWindow</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    InitializeComponent();</span><br><span class="line">    <span class="keyword">this</span>.DataContext = <span class="keyword">new</span> MainWindowViewModel();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-xaml中d-DataContext指定">2. <code>xaml</code>中<code>d:DataContext</code>指定</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlns:viewmodel=&quot;clr-namespace:LearnWpf.ViewModel&quot; </span><br><span class="line">d:DataContext=&quot;&#123;d:DesignInstance Type=viewmodel:MainWindowViewModel&#125;&quot;</span><br></pre></td></tr></table></figure><h5 id="3-xaml中添加">3. <code>xaml</code>中添加</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Window.DataContext</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">viewmodel:MainWindowViewModel</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Window.DataContext</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Banding-DataContext说明"><code>Banding DataContext</code>说明</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注意此时我已经在初始化代码中设置DataContext 为 ClassA，DataContext = new ClassA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Window</span> <span class="attr">x:Name</span>=<span class="string">&quot;MyWindow&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- DataContext 没有被指定,所以继承自父类 的 DataContext,也就是 ClassA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- DataContext 继承自父类,也就是 ClassA, 所以这里会显示 ClassA.Name --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Label</span> <span class="attr">Content</span>=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- DataContext 仍然是ClassA, 但是我们通过binding设置为ClassA.ClassB--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">StackPanel</span> <span class="attr">DataContext</span>=<span class="string">&quot;&#123;Binding ClassB&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- DataContext 继承自父类，也就是ClassB，所以这里会显示 ClassB.Name --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Label</span> <span class="attr">Content</span>=<span class="string">&quot;&#123;Binding Name&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- DataContext i仍然是 ClassB, 但是我们binding 到了Window&#x27;s DataContext.Name, 也就是 ClassA.Name --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Label</span> <span class="attr">Content</span>=<span class="string">&quot;&#123;Binding ElementName=MyWindow, Path=DataContext.Name&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- We&#x27;ve left the StackPanel with its DataContext bound to ClassB, so this Label&#x27;s DataContext is ClassA (inherited from parent StackPanel), and we are binding to ClassA.ClassB.Name --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Label</span> <span class="attr">Content</span>=<span class="string">&quot;&#123;Binding ClassB.Name&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">StackPanel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Window</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;深入浅出&lt;code&gt;WPF&lt;/code&gt;示例, 理解Binding实现&lt;/p&gt;</summary>
    
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/CSharp/"/>
    
    <category term="WPF" scheme="https://silencejql.github.io/categories/CSharp/WPF/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="WPF" scheme="https://silencejql.github.io/tags/WPF/"/>
    
  </entry>
  
  <entry>
    <title>设计模式-MVVM</title>
    <link href="https://silencejql.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-MVVM.html"/>
    <id>https://silencejql.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-MVVM.html</id>
    <published>2025-07-26T09:01:18.000Z</published>
    <updated>2025-07-26T13:21:28.158Z</updated>
    
    <content type="html"><![CDATA[<p><code>MVVM-&gt;Model View ViewModel</code></p><span id="more"></span><h2 id="MVVM-Model-View-ViewModel"><code>MVVM (Model-View-ViewModel)</code></h2><p><strong>概念解析：</strong></p><ul><li><p><code>MVVM</code>作为<code>MVC</code>模式的改良版，尤其受到现代前端开发青睐，常见于与<code>Vue</code>、<code>Angular</code>、<code>React</code>等框架的深度融合。</p></li><li><p><strong><code>Model</code></strong>：与<code>MVC</code>中一样，负责数据管理与业务逻辑处理。</p></li><li><p><strong><code>View</code></strong>：负责渲染用户界面，但不再直接与<code>Model</code>交流。</p></li><li><p><strong><code>ViewModel</code></strong>：作为新增角色，充当<code>View</code>与<code>Model</code>之间的枢纽，封装视图逻辑，并实现数据绑定，让<code>Model</code>与<code>View</code>的同步实现自动化。</p></li></ul><p><strong>运作机制详解：</strong></p><ul><li><strong>双向数据绑定</strong>：<code>ViewModel</code>与<code>Mode</code>l建立绑定关系，一旦<code>Model</code>数据发生变更，<code>ViewModel</code>会自动更新，并通过数据绑定技术将变化同步到<code>View</code>；反之，用户在<code>View</code>的操作也会通过双向绑定自动反应到<code>ViewModel</code>和<code>Model</code>中。</li><li><strong>观察者模式</strong>：<code>MVVM</code>通常采用观察者模式实现数据绑定，<code>ViewModel</code>监控<code>Model</code>变化并自动更新视图。</li></ul><p><strong>优缺点评估：</strong></p><ul><li><strong>优点</strong>：通过数据绑定技术大大减轻了手动维护视图状态的工作量，提升了开发效率，降低了代码耦合度。</li><li><strong>缺点</strong>：新手理解数据绑定机制可能存在一定的难度，另外，在大型或高性能应用中，若未经合理优化，可能会产生较多<code>DOM</code>操作，影响性能表现。</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;MVVM-&amp;gt;Model View ViewModel&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="设计模式" scheme="https://silencejql.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/CSharp/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="设计模式" scheme="https://silencejql.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>SICK RFID RFU630读写标签</title>
    <link href="https://silencejql.github.io/SICK-RFID-RFU630%E8%AF%BB%E5%86%99%E6%A0%87%E7%AD%BE.html"/>
    <id>https://silencejql.github.io/SICK-RFID-RFU630%E8%AF%BB%E5%86%99%E6%A0%87%E7%AD%BE.html</id>
    <published>2025-07-21T02:56:50.000Z</published>
    <updated>2025-07-21T04:59:20.911Z</updated>
    
    <content type="html"><![CDATA[<p><code>SICK RFID RFU630</code>通电后默认启动<code>192.168.0.1 2112</code> <code>tcp</code>服务, 客户端可直接发送读写命令正常使用, 若需配置功率等则要安装<code>SOPAS_Engineering_Tool</code> 工具进行配置</p><span id="more"></span><h2 id="协议">协议</h2><h3 id="存储结构">存储结构</h3><p><img src="SICK-RFID-RFU630%E8%AF%BB%E5%86%99%E6%A0%87%E7%AD%BE/Memory.png" alt="Memory"></p><h3 id="读写命令">读写命令</h3><p><img src="SICK-RFID-RFU630%E8%AF%BB%E5%86%99%E6%A0%87%E7%AD%BE/Read.png" alt="Read"></p><p><img src="SICK-RFID-RFU630%E8%AF%BB%E5%86%99%E6%A0%87%E7%AD%BE/Write.png" alt="Write"></p><h2 id="示例说明">示例说明</h2><p>读写<code>Bank=0b11=3</code> 用户存储区域数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;STX&gt;sMN TAreadTagData 0 3 0 9 32&lt;ETX&gt;</span><br><span class="line">0: 从0位开始</span><br><span class="line">9: 读取9word, 9*2=18byte, 9*2*2=36位字符. 即9*2个xx-&gt;18字节-&gt;36个字符</span><br><span class="line"></span><br><span class="line">&lt;STX&gt;sMN TAwriteTagData 0 3 0 1 32 +4 0000&lt;ETX&gt;</span><br><span class="line">1:1word-&gt;2个字节xx xx-&gt;-&gt;4位字符-&gt;+4</span><br><span class="line">&lt;STX&gt;sMN TAwriteTagData 0 3 0 2 32 +8 0000&lt;ETX&gt;</span><br><span class="line">2:2word-&gt;4字节xx xx xx xx-&gt;8位-&gt;+8</span><br><span class="line"></span><br><span class="line">写入01234567891234567</span><br><span class="line">&lt;STX&gt;sMN TAwriteTagData 0 3 0 9 32 +36 303132333435363738393132333435363700&lt;ETX&gt;</span><br><span class="line">0: 从0位开始写入</span><br><span class="line">9: 写入9word-&gt;18byte-&gt;36位字符</span><br></pre></td></tr></table></figure><h2 id="代码示例">代码示例</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">RFID_SICK_RFU630</span> : <span class="title">xStringEx</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> xString Connected = <span class="keyword">new</span> xString();</span><br><span class="line">    <span class="keyword">private</span> xString Enable = <span class="keyword">new</span> xString();</span><br><span class="line">    <span class="keyword">private</span> xString SendString = <span class="keyword">new</span> xString();</span><br><span class="line">    <span class="keyword">private</span> xString RecvString = <span class="keyword">new</span> xString();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> TcpClient tcpClient = <span class="keyword">new</span> TcpClient();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> EnableLog = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> LogFile = <span class="string">&quot;RFID_SICK_RFU630&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> remoteIP = <span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> remotePort = <span class="number">2112</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> recvTimeout = <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RFID_SICK_RFU630</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Connected = TCreate(<span class="keyword">new</span> xString(), <span class="string">&quot;Connected&quot;</span>);</span><br><span class="line">        Enable = TCreate(<span class="keyword">new</span> xString(), <span class="string">&quot;Enable&quot;</span>);</span><br><span class="line">        SendString = TCreate(<span class="keyword">new</span> xString(), <span class="string">&quot;SendString&quot;</span>);</span><br><span class="line">        RecvString = TCreate(<span class="keyword">new</span> xString(), <span class="string">&quot;RecvString&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> xState <span class="title">Init</span>(<span class="params"><span class="built_in">string</span> sPara</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt; PortCif = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                &#123; <span class="string">&quot;IPAddr&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span> &#125;,</span><br><span class="line">                &#123; <span class="string">&quot;PortNo&quot;</span>, <span class="number">2112</span> &#125;,</span><br><span class="line">                &#123; <span class="string">&quot;RecvTimeout&quot;</span>, <span class="number">1000</span> &#125;,</span><br><span class="line">                &#123; <span class="string">&quot;EnableLog&quot;</span>, <span class="literal">true</span> &#125;,</span><br><span class="line">                &#123; <span class="string">&quot;LogFileName&quot;</span>, LogFile &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            XmlFO.Configs.Get(<span class="string">&quot;TCPClient&quot;</span>, sPara, PortCif);</span><br><span class="line"></span><br><span class="line">            remoteIP = Convert.ToString(PortCif[<span class="string">&quot;IPAddr&quot;</span>]);</span><br><span class="line">            remotePort = Convert.ToInt32(PortCif[<span class="string">&quot;PortNo&quot;</span>]);</span><br><span class="line">            recvTimeout = Convert.ToInt32(PortCif[<span class="string">&quot;RecvTimeout&quot;</span>]);</span><br><span class="line">            EnableLog = Convert.ToBoolean(PortCif[<span class="string">&quot;EnableLog&quot;</span>]);</span><br><span class="line">            LogFile = Convert.ToString(PortCif[<span class="string">&quot;LogFileName&quot;</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> xState.xTrue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            xErrorOutException(e);</span><br><span class="line">            <span class="keyword">return</span> xState.xFalse;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> xState <span class="title">RFIDRecv</span>(<span class="params"><span class="built_in">string</span> sPara</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!IsOnline())</span><br><span class="line">                Connect();</span><br><span class="line">            <span class="built_in">string</span> sendData = <span class="string">&quot;\u0002&quot;</span> + XmlFO.StringAnalysis(sPara) + <span class="string">&quot;\u0003&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span> tcpRecvString = TCPSendRecv(sendData);</span><br><span class="line">            <span class="keyword">if</span> (tcpRecvString.Length &lt; <span class="number">40</span>)</span><br><span class="line">                <span class="keyword">return</span> xState.xFalse;</span><br><span class="line">            tcpRecvString = tcpRecvString.Substring(<span class="number">24</span>, <span class="number">40</span>).Trim();</span><br><span class="line"></span><br><span class="line">            <span class="built_in">int</span> length = tcpRecvString.Length;</span><br><span class="line">            <span class="built_in">byte</span>[] bytes = <span class="keyword">new</span> <span class="built_in">byte</span>[length / <span class="number">2</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i += <span class="number">2</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                bytes[i / <span class="number">2</span>] = Convert.ToByte(tcpRecvString.Substring(i, <span class="number">2</span>), <span class="number">16</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            tcpRecvString = Encoding.ASCII.GetString(bytes).Trim(<span class="string">&#x27;\0&#x27;</span>).Trim();</span><br><span class="line">            RecvString.xValue = tcpRecvString;</span><br><span class="line">            Logout(<span class="string">&quot;Recv -&gt; VIN: &quot;</span> + tcpRecvString);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> xState.xTrue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Logout(ex.ToString());</span><br><span class="line">            <span class="keyword">return</span> xState.xFalse;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> xState <span class="title">RFIDWriteVIN</span>(<span class="params"><span class="built_in">string</span> sPara</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!IsOnline())</span><br><span class="line">                Connect();</span><br><span class="line">            <span class="built_in">string</span> vin = XmlFO.StringAnalysis(sPara.Trim());</span><br><span class="line">            Logout(<span class="string">&quot;写入VIN: &quot;</span> + vin);</span><br><span class="line">            <span class="built_in">string</span> vinHexString = <span class="built_in">string</span>.Empty;</span><br><span class="line">            Encoding.ASCII.GetBytes(vin).ToList().ForEach(b =&gt; vinHexString += b.ToString(<span class="string">&quot;X2&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> sendString = <span class="string">&quot;\u0002&quot;</span> + <span class="string">&quot;sMN TAwriteTagData 0 3 0 9 32 +36 &quot;</span> + vinHexString.PadRight(<span class="number">36</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;\u0003&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span> tcpRecvString = TCPSendRecv(sendString);</span><br><span class="line">            RecvString.xValue = tcpRecvString;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> xState.xTrue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Logout(ex.ToString());</span><br><span class="line">            <span class="keyword">return</span> xState.xFalse;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">TCPSendRecv</span>(<span class="params"><span class="built_in">string</span> sendData</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Logout(<span class="string">&quot;Send -&gt; &quot;</span> + sendData);</span><br><span class="line">        tcpClient.Client.Send(Encoding.ASCII.GetBytes(sendData));</span><br><span class="line"></span><br><span class="line">        <span class="built_in">byte</span>[] tcpRecvByts = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="built_in">int</span> recvLength = tcpClient.Client.Receive(tcpRecvByts);</span><br><span class="line">        <span class="keyword">if</span> (recvLength &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="built_in">byte</span>[] tmpRecvData = <span class="keyword">new</span> <span class="built_in">byte</span>[recvLength];</span><br><span class="line">        Array.Copy(tcpRecvByts, tmpRecvData, recvLength);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> tcpRecvString = Encoding.ASCII.GetString(tmpRecvData).Trim(<span class="string">&#x27;\0&#x27;</span>).Trim();</span><br><span class="line">        Logout(<span class="string">&quot;Recv -&gt; &quot;</span> + tcpRecvString);</span><br><span class="line">        <span class="keyword">return</span> tcpRecvString;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Connect</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (tcpClient == <span class="literal">null</span>)</span><br><span class="line">            tcpClient = <span class="keyword">new</span> TcpClient();</span><br><span class="line">        <span class="keyword">if</span> (tcpClient.Connected)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        tcpClient.Close();</span><br><span class="line">        tcpClient = <span class="keyword">new</span> TcpClient();</span><br><span class="line">        tcpClient.Connect(IPAddress.Parse(remoteIP), remotePort);</span><br><span class="line">        tcpClient.Client.ReceiveTimeout = recvTimeout;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">IsOnline</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (tcpClient == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">bool</span> onLine = !((tcpClient.Client.Poll(<span class="number">100</span>, SelectMode.SelectRead) &amp;&amp; (tcpClient.Client.Available == <span class="number">0</span>)) || !tcpClient.Client.Connected);</span><br><span class="line">        <span class="keyword">if</span> (!onLine)</span><br><span class="line">            tcpClient = <span class="literal">null</span>;</span><br><span class="line">        Connected.xValue = onLine.ToString();</span><br><span class="line">        <span class="keyword">return</span> onLine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Logout</span>(<span class="params"><span class="built_in">string</span> msg</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(EnableLog)</span><br><span class="line">            OnlyOneStartUp.Log(LogFile, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;SICK RFID RFU630&lt;/code&gt;通电后默认启动&lt;code&gt;192.168.0.1 2112&lt;/code&gt; &lt;code&gt;tcp&lt;/code&gt;服务, 客户端可直接发送读写命令正常使用, 若需配置功率等则要安装&lt;code&gt;SOPAS_Engineering_Tool&lt;/code&gt; 工具进行配置&lt;/p&gt;</summary>
    
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/CSharp/"/>
    
    <category term="BBK" scheme="https://silencejql.github.io/categories/CSharp/BBK/"/>
    
    
    <category term="BBK" scheme="https://silencejql.github.io/tags/BBK/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="RFID" scheme="https://silencejql.github.io/tags/RFID/"/>
    
  </entry>
  
  <entry>
    <title>CSharp调用C++ dll</title>
    <link href="https://silencejql.github.io/CSharp%E8%B0%83%E7%94%A8C-dll.html"/>
    <id>https://silencejql.github.io/CSharp%E8%B0%83%E7%94%A8C-dll.html</id>
    <published>2025-07-02T02:20:46.000Z</published>
    <updated>2025-07-02T02:24:33.475Z</updated>
    
    <content type="html"><![CDATA[<p>C#中动态加载C++ DLL文件</p><span id="more"></span><p>在C#中动态加载C++ DLL（动态链接库）可以通过几种方式实现。下面我将介绍最常用的方法：</p><h2 id="1-使用DllImport特性（静态加载）">1. 使用DllImport特性（静态加载）</h2><p>这是最常见的方式，虽然不是完全动态的，但值得了解：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 声明DLL中的函数</span></span><br><span class="line">    [<span class="meta">DllImport(<span class="string">&quot;YourCppDll.dll&quot;</span>, CallingConvention = CallingConvention.Cdecl)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="built_in">int</span> <span class="title">YourCppFunction</span>(<span class="params"><span class="built_in">int</span> param1, <span class="built_in">string</span> param2</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 调用DLL中的函数</span></span><br><span class="line">        <span class="built_in">int</span> result = YourCppFunction(<span class="number">123</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Result: <span class="subst">&#123;result&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-使用LoadLibrary和GetProcAddress（真正动态加载）">2. 使用LoadLibrary和GetProcAddress（真正动态加载）</h2><p>如果你想在运行时决定加载哪个DLL，可以使用Windows API：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 导入Windows API函数</span></span><br><span class="line">    [<span class="meta">DllImport(<span class="string">&quot;kernel32.dll&quot;</span>, SetLastError = true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">LoadLibrary</span>(<span class="params"><span class="built_in">string</span> dllToLoad</span>)</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">DllImport(<span class="string">&quot;kernel32.dll&quot;</span>, SetLastError = true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">GetProcAddress</span>(<span class="params">IntPtr hModule, <span class="built_in">string</span> procedureName</span>)</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">DllImport(<span class="string">&quot;kernel32.dll&quot;</span>, SetLastError = true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="built_in">bool</span> <span class="title">FreeLibrary</span>(<span class="params">IntPtr hModule</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义委托类型匹配C++函数签名</span></span><br><span class="line">    [<span class="meta">UnmanagedFunctionPointer(CallingConvention.Cdecl)</span>]</span><br><span class="line">    <span class="function"><span class="built_in">delegate</span> <span class="built_in">int</span> <span class="title">YourCppFunctionDelegate</span>(<span class="params"><span class="built_in">int</span> param1, <span class="built_in">string</span> param2</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        IntPtr pDll = LoadLibrary(<span class="string">@&quot;YourCppDll.dll&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (pDll == IntPtr.Zero)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Failed to load DLL&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        IntPtr pAddressOfFunctionToCall = GetProcAddress(pDll, <span class="string">&quot;YourCppFunction&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (pAddressOfFunctionToCall == IntPtr.Zero)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Failed to find function&quot;</span>);</span><br><span class="line">            FreeLibrary(pDll);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将函数指针转换为委托</span></span><br><span class="line">        YourCppFunctionDelegate yourFunction = Marshal.GetDelegateForFunctionPointer&lt;YourCppFunctionDelegate&gt;(pAddressOfFunctionToCall);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用函数</span></span><br><span class="line">        <span class="built_in">int</span> result = yourFunction(<span class="number">123</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Result: <span class="subst">&#123;result&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 释放DLL</span></span><br><span class="line">        FreeLibrary(pDll);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-使用COM-Interop（如果DLL是COM组件）">3. 使用COM Interop（如果DLL是COM组件）</h2><p>如果C++ DLL是COM组件，可以使用COM互操作：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type comType = Type.GetTypeFromProgID(<span class="string">&quot;YourCOMComponent.YourClass&quot;</span>);</span><br><span class="line"><span class="built_in">dynamic</span> comObject = Activator.CreateInstance(comType);</span><br><span class="line">comObject.YourMethod(<span class="number">123</span>, <span class="string">&quot;test&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="注意事项">注意事项</h2><ol><li><p><strong>调用约定</strong>：确保C#端和C++端的调用约定一致（通常C++使用<code>__cdecl</code>或<code>__stdcall</code>）。</p></li><li><p><strong>数据类型映射</strong>：注意C++和C#之间的数据类型转换，特别是字符串和指针类型。</p></li><li><p><strong>32/64位兼容性</strong>：确保DLL和应用程序的平台架构一致（同为x86或x64）。</p></li><li><p><strong>DLL位置</strong>：DLL文件需要放在应用程序可找到的路径（如exe所在目录或系统PATH中）。</p></li><li><p><strong>内存管理</strong>：如果DLL分配内存，确保有相应的释放机制，避免内存泄漏。</p></li><li><p><strong>异常处理</strong>：C++异常不能直接传递到C#，需要在C++端捕获并转换为错误码。</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;C#中动态加载C++ DLL文件&lt;/p&gt;</summary>
    
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/CSharp/"/>
    
    <category term="C++" scheme="https://silencejql.github.io/categories/CSharp/C/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="C" scheme="https://silencejql.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>AlgorithmLearning-汉诺塔(分治递归)</title>
    <link href="https://silencejql.github.io/AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92.html"/>
    <id>https://silencejql.github.io/AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92.html</id>
    <published>2025-06-19T05:10:17.000Z</published>
    <updated>2025-07-21T05:25:36.039Z</updated>
    
    <content type="html"><![CDATA[<p>利用分治处理汉诺塔问题</p><span id="more"></span><h2 id="问题">问题</h2><p>给定三根柱子，记为 A、B 和 C 。起始状态下，柱子A 上套着 𝑛 个圆盘，它们从上到下按照从小到大的顺序排列。我们的任务是要把这 𝑛 个圆盘移到柱子C 上，并保持它们的原有顺序不变</p><ol><li>圆盘只能从一根柱子顶部拿出，从另一根柱子顶部放入。</li><li>每次只能移动一个圆盘。</li><li>小圆盘必须时刻位于大圆盘之上。<br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133250.png" alt="AC"></li></ol><h3 id="问题分析">问题分析</h3><h4 id="对于问题-𝑓-1">对于问题 𝑓(1)</h4><p>即当只有一个圆盘时，我们将它直接从 A 移动至 C 即可<br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133711.png" alt="AC"></p><h4 id="对于问题-𝑓-2">对于问题 𝑓(2)</h4><p>即当有两个圆盘时， 由于要时刻满足小圆盘在大圆盘之上，因此需要借助<br>B 来完成移动。</p><ol><li>先将上面的小圆盘从 A 移至 B 。</li><li>再将大圆盘从 A 移至 C 。</li><li>最后将小圆盘从 B 移至 C 。<br>解决问题 𝑓(2) 的过程可总结为： 将两个圆盘借助 B 从 A 移至 C 。其中，C 称为目标柱、B 称为缓冲柱。<br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133805.png" alt="AC1"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133825.png" alt="AC2"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133831.png" alt="AC3"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133835.png" alt="AC4"></li></ol><h4 id="对于问题-𝑓-3">对于问题 𝑓(3)</h4><p>即当有三个圆盘时，情况变得稍微复杂了一些。<br>因为已知 𝑓(1) 和 𝑓(2) 的解，所以我们可从分治角度思考， 将 A 顶部的两个圆盘看作一个整体, 这样三个圆盘就被顺利地从 A 移至 C 了。</p><ol><li>令 B 为目标柱、 C 为缓冲柱，将两个圆盘从 A 移至 B 。</li><li>将 A 中剩余的一个圆盘从 A 直接移动至 C 。</li><li>令 C 为目标柱、 A 为缓冲柱，将两个圆盘从 B 移至 C 。<br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133859.png" alt="AC"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133903.png" alt="AC"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133907.png" alt="AC"><br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133919.png" alt="AC"></li></ol><p>从本质上看， 我们将问题 𝑓(3) 划分为两个子问题 𝑓(2) 和一个子问题 𝑓(1) 。按顺序解决这三个子问题之后，<br>原问题随之得到解决。这说明子问题是独立的，而且解可以合并。<br>至此，我们可总结出下图所示的解决汉诺塔问题的分治策略：将原问题 𝑓(𝑛) 划分为两个子问题 𝑓(𝑛-1)<br>和一个子问题 𝑓(1) ，并按照以下顺序解决这三个子问题。</p><ol><li>将 𝑛 - 1 个圆盘借助 C 从 A 移至 B 。</li><li>将剩余 1 个圆盘从 A 直接移至 C 。</li><li>将 𝑛 - 1 个圆盘借助 A 从 B 移至 C 。<br>对于这两个子问题 𝑓(𝑛 - 1) ， 可以通过相同的方式进行递归划分，直至达到最小子问题 𝑓(1) 。而 𝑓(1) 的<br>解是已知的，只需一次移动操作即可。<br><img src="AlgorithmLearning-%E6%B1%89%E8%AF%BA%E5%A1%94-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92/20250619133615.png" alt="AC"></li></ol><h2 id="代码实现">代码实现</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 移动一个圆盘 */</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Move</span>(<span class="params">List&lt;<span class="built_in">int</span>&gt; src, List&lt;<span class="built_in">int</span>&gt; target</span>)</span> </span><br><span class="line">&#123;  </span><br><span class="line"> <span class="comment">// 从 src 顶部拿出一个圆盘  </span></span><br><span class="line"> <span class="built_in">int</span> pan = src[^<span class="number">1</span>];  </span><br><span class="line"> src.RemoveAt(src.Count - <span class="number">1</span>);  </span><br><span class="line"> <span class="comment">// 将圆盘放入 target 顶部  </span></span><br><span class="line"> target.Add(pan);  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 求解汉诺塔问题 f(i) */</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span>(<span class="params"><span class="built_in">int</span> i, List&lt;<span class="built_in">int</span>&gt; src, List&lt;<span class="built_in">int</span>&gt; buffer, List&lt;<span class="built_in">int</span>&gt; target</span>)</span> &#123;  </span><br><span class="line"> <span class="comment">// 若 src 只剩下一个圆盘，则直接将其移到 target  </span></span><br><span class="line"> <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;  </span><br><span class="line">  Move(src, target);  </span><br><span class="line">  <span class="keyword">return</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="comment">// 子问题 f(i-1) ：将 src 顶部 i-1 个圆盘借助 target 移到 buffer  </span></span><br><span class="line"> DFS(i - <span class="number">1</span>, src, target, buffer);  </span><br><span class="line"> <span class="comment">// 子问题 f(1) ：将 src 剩余一个圆盘移到 target  </span></span><br><span class="line"> Move(src, target);  </span><br><span class="line"> <span class="comment">// 子问题 f(i-1) ：将 buffer 顶部 i-1 个圆盘借助 src 移到 target</span></span><br><span class="line"> DFS(i - <span class="number">1</span>, buffer, src, target);  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 求解汉诺塔问题 */</span>  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SolveHanota</span>(<span class="params">List&lt;<span class="built_in">int</span>&gt; A, List&lt;<span class="built_in">int</span>&gt; B, List&lt;<span class="built_in">int</span>&gt; C</span>)</span> &#123;  </span><br><span class="line"> <span class="built_in">int</span> n = A.Count;  </span><br><span class="line"> <span class="comment">// 将 A 顶部 n 个圆盘借助 B 移到 C  </span></span><br><span class="line"> DFS(n, A, B, C);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;利用分治处理汉诺塔问题&lt;/p&gt;</summary>
    
    
    
    <category term="算法" scheme="https://silencejql.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/%E7%AE%97%E6%B3%95/CSharp/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="算法" scheme="https://silencejql.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>AlgorithmLearning-二分查找(分治递归)</title>
    <link href="https://silencejql.github.io/AlgorithmLearning-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92.html"/>
    <id>https://silencejql.github.io/AlgorithmLearning-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE-%E5%88%86%E6%B2%BB%E9%80%92%E5%BD%92.html</id>
    <published>2025-06-19T04:50:21.000Z</published>
    <updated>2025-07-21T05:23:58.845Z</updated>
    
    <content type="html"><![CDATA[<p>基于分治的二分查找</p><span id="more"></span><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span>[] sortedArray2 = <span class="keyword">new</span> <span class="built_in">int</span>[] &#123; <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">46</span>, <span class="number">57</span>, <span class="number">68</span>, <span class="number">79</span> &#125;;  </span><br><span class="line">FindIndex(sortedArray2, <span class="number">25</span>, <span class="number">0</span>, <span class="number">9</span>);  </span><br><span class="line"><span class="comment">//查找target = 6的index  </span></span><br><span class="line"><span class="function"><span class="built_in">int</span> <span class="title">FindIndex</span>(<span class="params"><span class="built_in">int</span>[] sortedArray, <span class="built_in">int</span> target, <span class="built_in">int</span> start, <span class="built_in">int</span> end</span>)</span>  </span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">if</span>(start &gt; end)</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"> <span class="built_in">int</span> mid = (start + end) / <span class="number">2</span>;  </span><br><span class="line">    mid.Dump();</span><br><span class="line">    <span class="keyword">if</span>(sortedArray[mid] == target)</span><br><span class="line">     <span class="keyword">return</span> mid;    </span><br><span class="line"> <span class="keyword">if</span>(sortedArray[mid] &lt; target)  </span><br><span class="line">    &#123;        </span><br><span class="line">     <span class="comment">//递归子问题f(m + 1, end)</span></span><br><span class="line">     <span class="keyword">return</span> FindIndex(sortedArray, target, mid + <span class="number">1</span>, end);  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">     <span class="comment">//递归子问题f(start, m - 1) </span></span><br><span class="line">     <span class="keyword">return</span> FindIndex(sortedArray, target, start, mid - <span class="number">1</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;基于分治的二分查找&lt;/p&gt;</summary>
    
    
    
    <category term="算法" scheme="https://silencejql.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/%E7%AE%97%E6%B3%95/CSharp/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="算法" scheme="https://silencejql.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>CSharp补课笔记TypeConverter</title>
    <link href="https://silencejql.github.io/CSharp%E8%A1%A5%E8%AF%BE%E7%AC%94%E8%AE%B0TypeConverter.html"/>
    <id>https://silencejql.github.io/CSharp%E8%A1%A5%E8%AF%BE%E7%AC%94%E8%AE%B0TypeConverter.html</id>
    <published>2025-05-03T08:13:14.000Z</published>
    <updated>2025-05-03T08:23:29.681Z</updated>
    
    <content type="html"><![CDATA[<p>实现不同类型之间的转换, 如动态的将字符串转换为对象实例</p><span id="more"></span><h2 id="示例">示例</h2><h3 id="使用示例">使用示例</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestTypeConvert</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    TypeConverter tc = TypeDescriptor.GetConverter(<span class="keyword">typeof</span>(ColorRGB));</span><br><span class="line"></span><br><span class="line">    ColorRGB colorRGB1 = (ColorRGB)tc.ConvertFromString(<span class="string">&quot;#FF8800&quot;</span>);</span><br><span class="line">    ColorRGB colorRGB2 = (ColorRGB)tc.ConvertFromString(<span class="string">&quot;255, 136, 0&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> colorString1 = tc.ConvertToString(colorRGB1);</span><br><span class="line">    <span class="built_in">string</span> colorString2 = tc.ConvertToString(colorRGB2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义类型">自定义类型</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将转换器与目标类型关联</span></span><br><span class="line">[<span class="meta">TypeConverter(typeof(ColorRGBConverter))</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ColorRGB</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">byte</span> R; <span class="keyword">public</span> <span class="built_in">byte</span> G; <span class="keyword">public</span> <span class="built_in">byte</span> B;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorRGB</span>(<span class="params"><span class="built_in">byte</span> r, <span class="built_in">byte</span> g, <span class="built_in">byte</span> b</span>)</span></span><br><span class="line">    &#123; R = r; G = g; B = b; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">string</span> <span class="title">ToString</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">string</span>.Format(<span class="string">&quot;#&#123;0:X2&#125;&#123;1:X2&#125;&#123;2:X2&#125;&quot;</span>, R, G, B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义类型转换器">定义类型转换器</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">ColorRGBConverter</span> : <span class="title">TypeConverter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//定义可以从哪些类型转换</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">CanConvertFrom</span>(<span class="params">ITypeDescriptorContext context, Type sourceType</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> sourceType == <span class="keyword">typeof</span>(<span class="built_in">string</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">CanConvertTo</span>(<span class="params">ITypeDescriptorContext context, Type destinationType</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">base</span>.CanConvertTo(context, destinationType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现将字符串转化为对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">object</span> <span class="title">ConvertFrom</span>(<span class="params">ITypeDescriptorContext context, CultureInfo culture, <span class="built_in">object</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">value</span> <span class="keyword">is</span> <span class="built_in">string</span> strValue)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(strValue.StartsWith(<span class="string">&quot;#&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (strValue.Length == <span class="number">7</span>)</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> ColorRGB(<span class="built_in">byte</span>.Parse(strValue.Substring(<span class="number">1</span>,<span class="number">2</span>), NumberStyles.HexNumber),</span><br><span class="line">                                            <span class="built_in">byte</span>.Parse(strValue.Substring(<span class="number">3</span>,<span class="number">2</span>), NumberStyles.HexNumber),</span><br><span class="line">                                            <span class="built_in">byte</span>.Parse(strValue.Substring(<span class="number">5</span>,<span class="number">2</span>), NumberStyles.HexNumber));                        </span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">string</span>[] parts = strValue.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> ColorRGB(<span class="built_in">byte</span>.Parse(parts[<span class="number">0</span>].Trim()),</span><br><span class="line">                                        <span class="built_in">byte</span>.Parse(parts[<span class="number">1</span>].Trim()),</span><br><span class="line">                                        <span class="built_in">byte</span>.Parse(parts[<span class="number">2</span>].Trim()));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> FormatException(<span class="string">&quot;格式不正确&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">base</span>.ConvertFrom(context, culture, <span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">object</span> <span class="title">ConvertTo</span>(<span class="params">ITypeDescriptorContext context, CultureInfo culture, <span class="built_in">object</span> <span class="keyword">value</span>, Type destinationType</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">value</span> <span class="keyword">is</span> ColorRGB &amp;&amp; destinationType == <span class="keyword">typeof</span>(<span class="built_in">string</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">value</span>.ToString();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">base</span>.ConvertTo(context, culture, <span class="keyword">value</span>, destinationType);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="扩展">扩展</h2><p>CultureInfo主要用于特定区域的数字, 日期, 货币等格式化设置</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;实现不同类型之间的转换, 如动态的将字符串转换为对象实例&lt;/p&gt;</summary>
    
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/categories/CSharp/"/>
    
    
    <category term="CSharp" scheme="https://silencejql.github.io/tags/CSharp/"/>
    
    <category term="CSharp 补课笔记" scheme="https://silencejql.github.io/tags/CSharp-%E8%A1%A5%E8%AF%BE%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>BEP软件配置实现与BBK通讯</title>
    <link href="https://silencejql.github.io/BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF.html"/>
    <id>https://silencejql.github.io/BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF.html</id>
    <published>2025-05-03T05:14:45.000Z</published>
    <updated>2025-07-21T05:28:42.932Z</updated>
    
    <content type="html"><![CDATA[<p>配置BEP四轮软件和注册表实现BBK与BEP通讯</p><span id="more"></span><h2 id="通讯简介">通讯简介</h2><p>BBK与BEP软件之间可选择串口(232)和TCP两种通讯方式, 现场常用串口通讯<br>软件之间交互主要有两个, 1. BBK扫码后将车型信息发送给BEP; 2. BEP将测试结果发送给BBK软件</p><h2 id="注册表配置">注册表配置</h2><h3 id="选择通讯方式">选择通讯方式</h3><h4 id="串口">串口</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/RegSerial.PNG" alt="Reg"></p><p>如上图<code>Use Host</code>用于配置软件间的通讯方式, 1为串口通讯, 2为网络通讯<br>当选择串口通讯时需要在软件中配置串口号, BEP软件对串口号的列举有限制,若串口使用扩展设备时串口号大于限值则不会在软件中显示, 这时需要将限值改大后再选择对应串口, 对应更改上图中的<code>Number of Serial Ports on Machine</code>.</p><h4 id="网口">网口</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/RegTcpip.PNG" alt="Tcp"></p><p>若选择网口通讯则需要配置上图所示的IP及端口号</p><h3 id="Host配置">Host配置</h3><p>BEP与BBK软件通讯中有相应的协议规则, 为了更方便的使用需要屏蔽一些规则</p><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/RegHost.PNG" alt="Host"></p><p>其中最主要的是要将<code>Use Host Handshaking</code>握手的配置改为0屏蔽掉, 否则无法直接与BEP软件进行数据交互<br>也可将图中所有<code>Use</code>开头值为1的配置改为0</p><h3 id="BEP软件配置">BEP软件配置</h3><h4 id="串口-v2">串口</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/BEPSerial.PNG" alt="Serial"></p><p>配置完注册表后需要配置BEP软件中的串口号<br>其中BEP软件通过HOST串口将测试数据发送给BBK<br>通过SCANNER串口接收BBK发送的车型信息<br>其他不需要的不用管或者在注册表中屏蔽</p><h4 id="网口-v2">网口</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/BEPTcp.PNG" alt="TCP"></p><p>若选择网口通讯则需要在上图中进行配置</p><h4 id="车型数据规则配置">车型数据规则配置</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/BEPVINConfig.PNG" alt="VIN"></p><p>BEP接收BBK发送车型数据字符串后会解析为VIN和ZTS, 由于ZTS可能存在不同长度所以需要配置不同的解析规则</p><p>具体配置参考上图, VIN为17位, ZTS为2位</p><p>BBK发送的车型数据也有一定规则, 在上图第二个标签也中进行配置, 默认为<code>0x02</code>STX开头, <code>0x03</code>ETX结尾</p><h4 id="测试结果发送配置">测试结果发送配置</h4><p><img src="BEP%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E4%B8%8EBBK%E9%80%9A%E8%AE%AF/BEPRsm.PNG" alt="rsm"></p><p>BEP通过图中<code>rsm_hoststring.xml</code>中配置的规则生成数据字符串后发送给BBK, BBK接收后通过同样的规则进行解析, 因此需要保证BEP和BBK调用该文件的一致性, 上图为BEP软件读取路径, 该路径在注册表配置HOST时可更改; BBK文件路径在相应Config文件下</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;配置BEP四轮软件和注册表实现BBK与BEP通讯&lt;/p&gt;</summary>
    
    
    
    
    <category term="BBK" scheme="https://silencejql.github.io/tags/BBK/"/>
    
  </entry>
  
  <entry>
    <title>Docker-composer常用指令</title>
    <link href="https://silencejql.github.io/Docker-composer%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4.html"/>
    <id>https://silencejql.github.io/Docker-composer%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4.html</id>
    <published>2025-04-01T07:21:20.000Z</published>
    <updated>2025-04-01T07:21:50.431Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id=""></h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取工程中所有服务依赖的镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">pull</span></span><br><span class="line"><span class="comment"># 拉取工程中 nginx 服务依赖的镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">pull</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 前台启动</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">up</span></span><br><span class="line"><span class="comment"># 后台启动</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">up</span> <span class="string">-d</span></span><br><span class="line"><span class="comment"># -f 指定使用的 Compose 模板文件，默认为 docker-compose.yml，可以多次指定，指定多个 yml</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">-f</span> <span class="string">docker-compose.yml</span> <span class="string">up</span> <span class="string">-d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出日志，不同的服务输出使用不同的颜色来区分</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">logs</span></span><br><span class="line"><span class="comment"># 跟踪日志输出</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">logs</span> <span class="string">-f</span></span><br><span class="line"><span class="comment"># 关闭颜色</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">logs</span> <span class="string">--no-color</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">ps</span></span><br><span class="line"><span class="comment"># 列出工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">ps</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在工程中指定服务的容器上执行 echo &quot;helloworld&quot;</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">run</span> <span class="string">nginx</span> <span class="string">echo</span> <span class="string">&quot;helloworld&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">exec</span> <span class="string">nginx</span> <span class="string">bash</span></span><br><span class="line"><span class="comment"># 当一个服务拥有多个容器时，可通过 --index 参数进入到该服务下的任何容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">exec</span> <span class="string">--index=1</span> <span class="string">nginx</span> <span class="string">bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂停工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">pause</span></span><br><span class="line"><span class="comment"># 暂停工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">pause</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">unpause</span></span><br><span class="line"><span class="comment"># 恢复工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">unpause</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">restart</span></span><br><span class="line"><span class="comment"># 重启工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">restart</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">start</span></span><br><span class="line"><span class="comment"># 启动工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">start</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止工程中所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">stop</span></span><br><span class="line"><span class="comment"># 停止工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">stop</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过发送 SIGKILL 信号停止工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">kill</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有（停止状态）服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">rm</span></span><br><span class="line"><span class="comment"># 先停止所有服务的容器，再删除所有服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">rm</span> <span class="string">-s</span></span><br><span class="line"><span class="comment"># 不询问是否删除，直接删除</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">rm</span> <span class="string">-f</span></span><br><span class="line"><span class="comment"># 删除服务容器挂载的数据卷</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">rm</span> <span class="string">-v</span></span><br><span class="line"><span class="comment"># 删除工程中指定服务的容器</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">rm</span> <span class="string">-sv</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止并删除工程中所有服务的容器、网络</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">stop</span></span><br><span class="line"><span class="comment"># 停止并删除工程中所有服务的容器、网络、镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">down</span> <span class="string">--rmi</span> <span class="string">all</span></span><br><span class="line"><span class="comment"># 停止并删除工程中所有服务的容器、网络、数据卷</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">down</span> <span class="string">-v</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印所有服务的容器所对应的镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">images</span></span><br><span class="line"><span class="comment"># 打印指定服务的容器所对应的镜像</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">images</span> <span class="string">nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印指定服务容器的某个端口所映射的宿主机端口</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">port</span> <span class="string">nginx</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示工程中所有服务的容器正在运行的进程</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">top</span></span><br><span class="line"><span class="comment"># 显示工程中指定服务的容器正在运行的进程</span></span><br><span class="line"><span class="string">docker-compose</span> <span class="string">top</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Docker-composer常用指令</summary>
    
    
    
    
    <category term="Docker" scheme="https://silencejql.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Windows安装配置Docker</title>
    <link href="https://silencejql.github.io/Windows%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEDocker.html"/>
    <id>https://silencejql.github.io/Windows%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEDocker.html</id>
    <published>2025-04-01T06:12:25.000Z</published>
    <updated>2025-04-01T06:29:48.838Z</updated>
    
    <content type="html"><![CDATA[<p>windows安装docker, 示例部署gitlab</p><span id="more"></span><h2 id="安装">安装</h2><p>自行下载安装Docker Desktop</p><p>安装完成后命令行输入<code>docker -v</code>可查看Docker版本信息</p><h2 id="配置">配置</h2><h3 id="配置镜像源">配置镜像源</h3><ol><li><p>在配置中添加registry mirrors</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;registry-mirrors&quot;:</span> [</span><br><span class="line"> <span class="string">&quot;https://docker.1ms.run&quot;</span>,</span><br><span class="line"> <span class="string">&quot;https://docker.xuanyuan.me&quot;</span></span><br><span class="line"> ]</span><br></pre></td></tr></table></figure></li><li><p>修改docker/daemon.json文件设置registry mirrors</p></li></ol><h3 id="拉去镜像">拉去镜像</h3><p>如: 拉取gitlab<code>docker pull gitlab/gitlab-ee:latest</code></p><h4 id="Gitlab配置">Gitlab配置</h4><p>新建文件路径存储Gitlab信息如:</p><blockquote><p>gitlab</p><blockquote><p>config<br>data<br>logs<br>docker-compose.yml</p></blockquote></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">gitlab:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&#x27;gitlab/gitlab-ee:latest&#x27;</span>  <span class="comment"># 使用 GitLab 企业版镜像，或将 &#x27;gitlab-ee&#x27; 改为 &#x27;gitlab-ce&#x27; 使用社区版</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">&#x27;localhost&#x27;</span>  <span class="comment"># 配置 GitLab 的主机名，可以改为你自己的域名或 IP 地址</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">GITLAB_OMNIBUS_CONFIG:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        external_url &#x27;http://localhost&#x27;  # GitLab 的外部 URL，建议替换为你服务器的域名或 IP</span></span><br><span class="line"><span class="string"></span>    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;80:80&#x27;</span>    <span class="comment"># 映射 HTTP 端口</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;443:443&#x27;</span>  <span class="comment"># 映射 HTTPS 端口</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;22:22&#x27;</span>    <span class="comment"># 映射 SSH 端口，供 GitLab 使用</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./gitlab/config:/etc/gitlab</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./gitlab/data:/var/opt/gitlab</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./gitlab/logs:/var/log/gitlab</span></span><br><span class="line">    <span class="attr">logging:</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&#x27;json-file&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&#x27;2g&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="启动Gitlab">启动Gitlab</h4><p>使用命令<code>docker-compose up -d</code>启动容器需要一定时间, 期间可以用<code>docker ps</code>查看状态, 从starting转为healthy则启动成功<br>访问<a href="http://xn--localhostgitlab-ym1zi4dy26g750f">http://localhost即可登录gitlab</a><br>默认用户为：root 密码在gitlab部署目录下gitlab下的gitlab/config/initial_root_password文件中</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;windows安装docker, 示例部署gitlab&lt;/p&gt;</summary>
    
    
    
    
    <category term="Docker" scheme="https://silencejql.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>BBK查询软件新增查询链接</title>
    <link href="https://silencejql.github.io/BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5.html"/>
    <id>https://silencejql.github.io/BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5.html</id>
    <published>2025-03-24T05:49:18.000Z</published>
    <updated>2025-03-24T11:45:53.004Z</updated>
    
    <content type="html"><![CDATA[<p>BBK查询软件新增或修改数据库链接字符串<br>可手动更改链接字符串或根据以下步骤自动生成</p><span id="more"></span><h2 id="新增本地链接Local">新增本地链接Local</h2><ol><li>登录管理员后勾选编辑模式</li><li>双击要更改的名称或点击添加连接<br><img src="BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5%5C%E9%80%89%E6%8B%A9%E9%93%BE%E6%8E%A5.png" alt="选择链接"></li><li>点击<strong>创建链接字符串</strong>选择相应的数据源, 本地PostgreSql选择如下<br><img src="BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5%5C%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E6%BA%90.png" alt="选择数据源"></li><li>配置连接属性如下, 其中Host可配置被访问数据库的ip<br><img src="BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5%5C%E8%BF%9E%E6%8E%A5%E5%B1%9E%E6%80%A7.png" alt="连接属性"></li><li>单击确定即可</li></ol><h2 id="新增服务器链接Server">新增服务器链接Server</h2><ol><li>登录管理员后勾选编辑模式</li><li>双击要更改的名称或点击添加连接后点击<strong>创建链接字符串</strong>选择相应的数据源, 服务器SQLServer选择如下<br><img src="BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5%5C%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E6%BA%90Server.png" alt="选择数据源"></li><li>配置链接属性如下, 其中Server name可配置被访问数据库的ip<br><img src="BBK%E6%9F%A5%E8%AF%A2%E8%BD%AF%E4%BB%B6%E6%96%B0%E5%A2%9E%E6%9F%A5%E8%AF%A2%E9%93%BE%E6%8E%A5%5C%E8%BF%9E%E6%8E%A5%E5%B1%9E%E6%80%A7Server.png" alt="连接属性"></li><li>单击确定即可</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;BBK查询软件新增或修改数据库链接字符串&lt;br&gt;
可手动更改链接字符串或根据以下步骤自动生成&lt;/p&gt;</summary>
    
    
    
    <category term="BBK" scheme="https://silencejql.github.io/categories/BBK/"/>
    
    
    <category term="BBK" scheme="https://silencejql.github.io/tags/BBK/"/>
    
  </entry>
  
  <entry>
    <title>Obsidain Dataview使用</title>
    <link href="https://silencejql.github.io/Obsidain-Dataview%E4%BD%BF%E7%94%A8.html"/>
    <id>https://silencejql.github.io/Obsidain-Dataview%E4%BD%BF%E7%94%A8.html</id>
    <published>2025-03-11T02:45:05.000Z</published>
    <updated>2025-03-11T02:45:05.425Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id=""></h2>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;/h2&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hexo部署到Gitlab</title>
    <link href="https://silencejql.github.io/Hexo%E9%83%A8%E7%BD%B2%E5%88%B0Gitlab.html"/>
    <id>https://silencejql.github.io/Hexo%E9%83%A8%E7%BD%B2%E5%88%B0Gitlab.html</id>
    <published>2025-03-08T09:24:38.000Z</published>
    <updated>2025-03-24T11:46:43.005Z</updated>
    
    <content type="html"><![CDATA[<p>博客部署到Gitlab与部署到Github等生成静态页面不同, Gitlab中需要存储完整代码.</p><span id="more"></span><h2 id="完整步骤">完整步骤</h2><p>以下是使用 <strong>Hexo</strong> 部署到 <strong>GitLab Pages</strong> 创建个人博客的完整指南，包含详细步骤和常见问题排查：</p><hr><h3 id="一、准备工作">一、准备工作</h3><ol><li><p><strong>安装 Node.js 和 npm</strong><br>Hexo 基于 Node.js，需先安装 <a href="https://nodejs.org/">Node.js</a>（建议选择 LTS 版本）。</p></li><li><p><strong>安装 Git</strong><br>下载并安装 <a href="https://git-scm.com/">Git</a>，用于代码管理。</p></li><li><p><strong>注册 GitLab 账号</strong><br>访问 <a href="https://gitlab.com/">GitLab</a> 注册账号。</p></li></ol><hr><h3 id="二、安装-Hexo-并初始化博客">二、安装 Hexo 并初始化博客</h3><ol><li><p><strong>全局安装 Hexo 命令行工具</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li><li><p><strong>创建 Hexo 项目</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init my-blog  <span class="comment"># 创建名为 my-blog 的博客目录</span></span><br><span class="line"><span class="built_in">cd</span> my-blog         <span class="comment"># 进入项目目录</span></span><br><span class="line">npm install        <span class="comment"># 安装依赖</span></span><br></pre></td></tr></table></figure></li><li><p><strong>本地预览</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server        <span class="comment"># 启动本地服务器</span></span><br></pre></td></tr></table></figure><p>访问 <code>http://localhost:4000</code> 查看默认博客。</p></li></ol><hr><h3 id="三、关联-GitLab-仓库">三、关联 GitLab 仓库</h3><ol><li><p><strong>在 GitLab 创建新项目</strong></p><ul><li>登录 GitLab → <strong>New project</strong> → <strong>Create blank project</strong>。</li><li>填写项目名称（如 <code>my-blog</code>），可见性选择 <code>Public</code>。</li><li><strong>重要</strong>：项目名称需与 Hexo 的 <code>_config.yml</code> 中配置的路径一致（默认无需修改）。</li></ul></li><li><p><strong>本地关联 GitLab 仓库</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin https://gitlab.com/你的用户名/my-blog.git</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="四、配置-Hexo-部署到-GitLab">四、配置 Hexo 部署到 GitLab</h3><ol><li><p><strong>安装 Hexo Git 部署插件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p><strong>修改 Hexo 配置文件</strong><br>打开 <code>_config.yml</code>，找到 <code>deploy</code> 部分，修改为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://gitlab.com/你的用户名/my-blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span>  <span class="comment"># GitLab 默认分支是 main，不是 master！</span></span><br></pre></td></tr></table></figure></li><li><p><strong>测试部署</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate --deploy</span><br></pre></td></tr></table></figure><ul><li>此命令会将生成的静态文件（在 <code>public</code> 目录下）推送到 GitLab 的 <code>main</code> 分支。</li><li>但为了自动化构建，建议使用 GitLab CI/CD（见下一步）。</li></ul></li></ol><hr><h3 id="五、配置-GitLab-CI-CD-自动化部署">五、配置 GitLab CI/CD 自动化部署</h3><ol><li><p><strong>创建 <code>.gitlab-ci.yml</code> 文件</strong><br>在项目根目录新建文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">node:16</span>  <span class="comment"># 使用 Node.js 16 环境</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">node_modules/</span>  <span class="comment"># 缓存依赖加速构建</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span>  <span class="comment"># 全局安装 Hexo</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span>  <span class="comment"># 生成静态文件到 public 目录</span></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">public</span>  <span class="comment"># GitLab Pages 默认从 public 目录部署</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">main</span>  <span class="comment"># 仅 main 分支触发构建</span></span><br></pre></td></tr></table></figure></li><li><p><strong>推送代码到 GitLab</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;初始化 Hexo 博客&quot;</span></span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure></li><li><p><strong>查看构建状态</strong></p><ul><li>进入 GitLab 项目 → <strong>CI/CD → Pipelines</strong>，查看流水线状态。</li><li>构建成功后，进入 <strong>Settings → Pages</strong>，确认网站地址。</li></ul></li></ol><hr><h3 id="六、访问博客">六、访问博客</h3><ul><li><p><strong>默认地址</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://你的用户名.gitlab.io/my-blog</span><br></pre></td></tr></table></figure><ul><li>如果项目名称为 <code>my-blog</code>，访问路径需包含项目名。</li><li>如果希望直接使用 <code>https://你的用户名.gitlab.io</code>，需将项目重命名为 <code>你的用户名.gitlab.io</code>（如 <code>john.gitlab.io</code>）。</li></ul></li></ul><hr><h3 id="七、自定义域名（可选）">七、自定义域名（可选）</h3><ol><li><p><strong>购买域名</strong><br>在域名服务商（如 GoDaddy、阿里云）购买域名（如 <code>example.com</code>）。</p></li><li><p><strong>配置 DNS 解析</strong></p><ul><li><p>添加 <code>CNAME</code> 记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机名：blog  </span><br><span class="line">类型：CNAME  </span><br><span class="line">值：你的用户名.gitlab.io</span><br></pre></td></tr></table></figure></li><li><p>或添加 <code>A</code> 记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机名：@  </span><br><span class="line">类型：A  </span><br><span class="line">值：35.185.44.232（GitLab Pages 的 IP）</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>GitLab 配置自定义域名</strong></p><ul><li><p>进入项目 → <strong>Settings → Pages</strong> → <strong>New Domain</strong>。</p></li><li><p>输入域名（如 <code>blog.example.com</code>），点击 <strong>Save</strong>。</p></li><li><p>在 Hexo 的 <code>source</code> 目录下创建 <code>CNAME</code> 文件（无后缀），内容为域名：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog.example.com</span><br></pre></td></tr></table></figure></li><li><p>推送代码使配置生效：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add <span class="built_in">source</span>/CNAME</span><br><span class="line">git commit -m <span class="string">&quot;添加自定义域名&quot;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="八、更新博客内容">八、更新博客内容</h3><ol><li><p><strong>新建文章</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;我的第一篇文章&quot;</span></span><br></pre></td></tr></table></figure><ul><li>编辑文件 <code>source/_posts/我的第一篇文章.md</code>。</li></ul></li><li><p><strong>本地预览</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo server</span><br></pre></td></tr></table></figure></li><li><p><strong>部署到 GitLab</strong></p><ul><li><p><strong>方式一</strong>：手动生成并推送</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate --deploy</span><br></pre></td></tr></table></figure></li><li><p><strong>方式二</strong>：触发 CI/CD 自动构建（推荐）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;添加新文章&quot;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="九、常见问题解决">九、常见问题解决</h3><ol><li><p><strong>构建失败</strong></p><ul><li><strong>错误提示</strong>：<code>npm install</code> 失败。<ul><li>检查 <code>.gitlab-ci.yml</code> 中的 Node.js 版本是否与本地一致。</li></ul></li><li><strong>错误提示</strong>：<code>hexo generate</code> 报错。<ul><li>确保 <code>_config.yml</code> 中语法正确（避免使用 Tab 缩进，需用空格）。</li></ul></li></ul></li><li><p><strong>页面 404</strong></p><ul><li><strong>原因</strong>：访问路径错误。<ul><li>如果项目名为 <code>my-blog</code>，访问地址应为 <code>https://用户名.gitlab.io/my-blog</code>。</li><li>若希望根路径访问，需将项目重命名为 <code>用户名.gitlab.io</code>。</li></ul></li></ul></li><li><p><strong>自定义域名不生效</strong></p><ul><li>检查 <code>CNAME</code> 文件是否提交到仓库。</li><li>等待 DNS 解析生效（最长可能需要 48 小时）。</li></ul></li></ol><hr><p>按照以上步骤，你可以将 Hexo 博客无缝部署到 GitLab Pages，享受免费、稳定的静态网站托管服务！</p><h2 id="部署Github方式部署到Gitlab">部署Github方式部署到Gitlab</h2><ol><li><p>在<code>_config.yml</code>中增加部署仓库链接</p></li><li><p>新建<code>.gitlab-ci.yml</code>文件用于触发流水线</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pages:</span></span><br><span class="line"><span class="attr">stage:</span> <span class="string">deploy</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mkdir</span> <span class="string">.public</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cp</span> <span class="string">-r</span> <span class="string">./*</span> <span class="string">.public</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">public</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mv</span> <span class="string">.public</span> <span class="string">public</span></span><br><span class="line"><span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">public</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>在执行完<code>hexo g</code>后先将<code>.gitlab-ci.yml</code>复制到<code>.deploy_git</code>中再执行<code>hexo d</code></p></li></ol><h2 id="官方方式">官方方式</h2><ol><li><p>如果你更希望你的站点部署在 <code>&lt;你的 GitLab 用户名&gt;.gitlab.io</code> 的子目录中，你的 <code>repository</code> 需要直接命名为子目录的名字，这样你的站点可以通过 <code>https://&lt;你的 GitLab 用户名&gt;.gitlab.io/&lt;repository 的名字&gt;</code> 访问。 你需要检查你的 Hexo 配置文件，将 url 的值修改为 <code>https://&lt;你的 GitLab 用户名&gt;.gitlab.io/&lt;repository 的名字&gt;</code>、将 root 的值修改为 <code>/&lt;repository 的名字&gt;/</code></p></li><li><p>通过 Settings &gt; CI/CD &gt; Runners &gt; Enable shared runners for this project 启用共享运行程序。</p></li><li><p>将你的 Hexo 站点文件夹推送到 repository 中。 默认情况下 public 目录将不会（并且不应该）被推送到 repository 中，建议你检查 .gitignore 文件中是否包含 public 一行，如果没有请加上。 整体文件夹结构应该与 示例储存库 大致相似。</p></li><li><p>使用 <code>node --version</code> 指令检查你电脑上的 Node.js 版本。 记下主要版本（例如，v16.y.z）</p></li><li><p>将 <code>.gitlab-ci.yml</code> 文件添加到您的版本库根目录（与 _config.yml &amp; package.json并列），内容如下（将16替换为您在上一步中注意到的 Node.js 主版本）</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">node:16-alpine</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line"><span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line"><span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">public</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">$CI_COMMIT_BRANCH</span> <span class="string">==</span> <span class="string">$CI_DEFAULT_BRANCH</span></span><br></pre></td></tr></table></figure></li><li><p>GitLab CI 应该会自动开始运行，构建成功以后你应该可以在 <code>https://&lt;你的 GitLab 用户名&gt;.gitlab.io</code> 查看你的网站。</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;博客部署到Gitlab与部署到Github等生成静态页面不同, Gitlab中需要存储完整代码.&lt;/p&gt;</summary>
    
    
    
    
    <category term="Hexo" scheme="https://silencejql.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo中修改KaTeX界定符</title>
    <link href="https://silencejql.github.io/Hexo%E4%B8%AD%E4%BF%AE%E6%94%B9KaTeX%E7%95%8C%E5%AE%9A%E7%AC%A6.html"/>
    <id>https://silencejql.github.io/Hexo%E4%B8%AD%E4%BF%AE%E6%94%B9KaTeX%E7%95%8C%E5%AE%9A%E7%AC%A6.html</id>
    <published>2025-03-07T05:51:28.000Z</published>
    <updated>2025-03-24T11:46:21.019Z</updated>
    
    <content type="html"><![CDATA[<p>在 Hexo 中修改 KaTeX 的界定符（定界符）</p><span id="more"></span><p>主要涉及 <strong>两个位置</strong>：<strong>主题模板文件</strong>和 <strong>KaTeX 初始化脚本</strong>。<br>以下是详细操作步骤：</p><hr><h3 id="1-修改位置：主题的-footer-模板文件"><strong>1. 修改位置：主题的 <code>footer</code> 模板文件</strong></h3><p>KaTeX 的界定符配置在初始化脚本中，通常位于 Next 主题的 <code>footer</code> 模板文件中。<br>文件路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">themes/next/layout/_partials/footer.njk</span><br><span class="line">或</span><br><span class="line">themes/next/layout/_partials/footer.swig</span><br></pre></td></tr></table></figure><h4 id="操作步骤："><strong>操作步骤：</strong></h4><ol><li><p>打开对应的 <code>footer</code> 文件（根据你的主题模板引擎，可能是 <code>.njk</code> 或 <code>.swig</code>）。</p></li><li><p>找到引入 <code>auto-render.min.js</code> 的脚本，修改 <code>delimiters</code> 参数：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">renderMathInElement</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">delimiters</span>: [</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 修改这里的 left 和 right 值</span></span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">left</span>: <span class="string">&#x27;$$&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;$$&#x27;</span>, <span class="attr">display</span>: <span class="literal">true</span>&#125;,   <span class="comment">// 块级公式</span></span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">left</span>: <span class="string">&#x27;$&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;$&#x27;</span>, <span class="attr">display</span>: <span class="literal">false</span>&#125;     <span class="comment">// 行内公式</span></span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">throwOnError</span>: <span class="literal">false</span>  <span class="comment">// 忽略公式错误</span></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>将 <code>left</code> 和 <code>right</code> 的值改为你想要的界定符。例如：</p><ul><li><p><strong>改用 <code>\(...\)</code> 和 <code>\[...\]</code></strong>（LaTeX 标准风格）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">delimiters</span>: [</span><br><span class="line">  &#123;<span class="attr">left</span>: <span class="string">&#x27;\\[&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;\\]&#x27;</span>, <span class="attr">display</span>: <span class="literal">true</span>&#125;,  <span class="comment">// 块级公式</span></span><br><span class="line">  &#123;<span class="attr">left</span>: <span class="string">&#x27;\\(&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;\\)&#x27;</span>, <span class="attr">display</span>: <span class="literal">false</span>&#125;   <span class="comment">// 行内公式</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>改用自定义符号</strong>（如 <code>@...@</code>）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">delimiters</span>: [</span><br><span class="line">  &#123;<span class="attr">left</span>: <span class="string">&#x27;@@&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;@@&#x27;</span>, <span class="attr">display</span>: <span class="literal">true</span>&#125;,  <span class="comment">// 块级公式</span></span><br><span class="line">  &#123;<span class="attr">left</span>: <span class="string">&#x27;@&#x27;</span>, <span class="attr">right</span>: <span class="string">&#x27;@&#x27;</span>, <span class="attr">display</span>: <span class="literal">false</span>&#125;     <span class="comment">// 行内公式</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="2-同步修改-Markdown-中的公式写法"><strong>2. 同步修改 Markdown 中的公式写法</strong></h3><p>修改界定符后，需在文章的 Markdown 中使用新的定界符。例如：</p><ul><li><p><strong>原写法</strong>：<code>$E = mc^2$</code> 和 <code>$$\sum_&#123;i=1&#125;^n i$$</code></p></li><li><p><strong>修改后</strong>（使用 <code>\(...\)</code> 和 <code>\[...\]</code>）：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">行内公式：<span class="keyword">\\</span>(E = mc<span class="built_in">^</span>2<span class="keyword">\\</span>)</span><br><span class="line"></span><br><span class="line">块级公式：</span><br><span class="line"><span class="keyword">\\</span>[</span><br><span class="line"><span class="keyword">\sum</span><span class="built_in">_</span>&#123;i=1&#125;<span class="built_in">^</span>n i</span><br><span class="line"><span class="keyword">\\</span>]</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="3-处理转义问题"><strong>3. 处理转义问题</strong></h3><p>如果界定符包含特殊字符（如 <code>\</code> 或 <code>@</code>），需确保 Markdown 渲染器不会转义它们：</p><h4 id="1-在-Hexo-的-config-yml-中配置">(1) 在 Hexo 的 <code>_config.yml</code> 中配置</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">html:</span> <span class="literal">true</span>      <span class="comment"># 允许 HTML 标签</span></span><br><span class="line">  <span class="attr">breaks:</span> <span class="literal">false</span>   <span class="comment"># 关闭自动换行转换</span></span><br><span class="line">  <span class="attr">linkify:</span> <span class="literal">false</span>  <span class="comment"># 关闭自动链接识别（避免 @ 被误识别）</span></span><br></pre></td></tr></table></figure><h4 id="2-转义反斜杠（仅限-和-场景）">(2) 转义反斜杠（仅限 <code>\(</code> 和 <code>\[</code> 场景）</h4><p>在 Markdown 中，如果使用 <code>\(...\)</code> 或 <code>\[...\]</code>，需在公式中写双反斜杠：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\\</span>[</span><br><span class="line"><span class="keyword">\int</span><span class="built_in">_</span>a<span class="built_in">^</span>b f(x) dx</span><br><span class="line"><span class="keyword">\\</span>]</span><br></pre></td></tr></table></figure><hr><h3 id="4-测试修改结果"><strong>4. 测试修改结果</strong></h3><ol><li><p>清理缓存并生成：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g</span><br></pre></td></tr></table></figure></li><li><p>启动本地服务器预览：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure></li><li><p>检查公式是否按新界定符渲染，打开浏览器控制台（F12）：</p><ul><li>确保无 JS 报错。</li><li>检查公式是否被正确包裹（如 <code>&lt;span class=&quot;katex&quot;&gt;</code>）。</li></ul></li></ol><hr><h3 id="5-常见问题"><strong>5. 常见问题</strong></h3><h4 id="问题1：修改后公式未渲染"><strong>问题1：修改后公式未渲染</strong></h4><ul><li><strong>原因</strong>：界定符修改未同步到所有位置（如文章中的公式未改用新符号）。</li><li><strong>解决</strong>：全局搜索旧界定符（如 <code>$</code>），替换为新的。</li></ul><h4 id="问题2：-被转义为"><strong>问题2：<code>\</code> 被转义为 <code>\\</code></strong></h4><ul><li><p><strong>原因</strong>：Markdown 渲染器自动转义了反斜杠。</p></li><li><p><strong>解决</strong>：在 Hexo 配置中关闭转义：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">typographer:</span> <span class="literal">false</span>  <span class="comment"># 关闭智能符号转换</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="问题3：与代码高亮冲突"><strong>问题3：与代码高亮冲突</strong></h4><ul><li><strong>现象</strong>：<code>@</code> 或 <code>\</code> 被代码语法高亮干扰。</li><li><strong>解决</strong>：避免使用与代码语法冲突的界定符（如 <code>`</code> 或 <code>*</code>）。</li></ul><hr><h3 id="示例配置"><strong>示例配置</strong></h3><h4 id="目标界定符">目标界定符</h4><ul><li>行内公式：<code>\\(...\\)</code></li><li>块级公式：<code>\\[...\\]</code></li></ul><h4 id="修改后的-footer-模板脚本">修改后的 <code>footer</code> 模板脚本</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">onload</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">    document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">      renderMathInElement(document.body, &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">        delimiters: [</span></span></span><br><span class="line"><span class="string"><span class="tag">          &#123;left: &#x27;\\[&#x27;, right: &#x27;\\]&#x27;, display: true&#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">          &#123;left: &#x27;\\(&#x27;, right: &#x27;\\)&#x27;, display: false&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">        ],</span></span></span><br><span class="line"><span class="string"><span class="tag">        throwOnError: false</span></span></span><br><span class="line"><span class="string"><span class="tag">      &#125;);</span></span></span><br><span class="line"><span class="string"><span class="tag">    &#125;);</span></span></span><br><span class="line"><span class="string"><span class="tag">  &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="对应的-Markdown-公式写法">对应的 Markdown 公式写法</h4><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">行内公式：<span class="keyword">\\</span>( <span class="keyword">\sqrt</span>&#123;2&#125; <span class="keyword">\approx</span> 1.414 <span class="keyword">\\</span>)</span><br><span class="line"></span><br><span class="line">块级公式：</span><br><span class="line"><span class="keyword">\\</span>[</span><br><span class="line"><span class="keyword">\int</span><span class="built_in">_</span>&#123;-<span class="keyword">\infty</span>&#125;<span class="built_in">^</span><span class="keyword">\infty</span> e<span class="built_in">^</span>&#123;-x<span class="built_in">^</span>2&#125; dx = <span class="keyword">\sqrt</span>&#123;<span class="keyword">\pi</span>&#125;</span><br><span class="line"><span class="keyword">\\</span>]</span><br></pre></td></tr></table></figure><hr><p>通过以上步骤，即可自定义 KaTeX 的界定符，解决与其他语法（如 Markdown 表格、代码块）的冲突问题。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在 Hexo 中修改 KaTeX 的界定符（定界符）&lt;/p&gt;</summary>
    
    
    
    <category term="KaTeX" scheme="https://silencejql.github.io/categories/KaTeX/"/>
    
    
    <category term="Hexo" scheme="https://silencejql.github.io/tags/Hexo/"/>
    
    <category term="KaTeX" scheme="https://silencejql.github.io/tags/KaTeX/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加KaTeX插件-问题处理</title>
    <link href="https://silencejql.github.io/Hexo%E6%B7%BB%E5%8A%A0KaTeX%E6%8F%92%E4%BB%B6-%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86.html"/>
    <id>https://silencejql.github.io/Hexo%E6%B7%BB%E5%8A%A0KaTeX%E6%8F%92%E4%BB%B6-%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86.html</id>
    <published>2025-03-07T05:49:29.000Z</published>
    <updated>2025-03-24T11:46:24.876Z</updated>
    
    <content type="html"><![CDATA[<p>如果按照 Hexo添加KaTeX插件 仍未生效，可能是某些环节配置错误或冲突导致</p><span id="more"></span><hr><h3 id="1-检查关键依赖安装"><strong>1. 检查关键依赖安装</strong></h3><p>确保以下依赖已正确安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确保渲染器和插件存在</span></span><br><span class="line">npm list hexo-renderer-markdown-it</span><br><span class="line">npm list @traptitech/markdown-it-katex</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果未安装，重新执行：</span></span><br><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it @traptitech/markdown-it-katex --save</span><br></pre></td></tr></table></figure><hr><h3 id="2-确认-Hexo-全局配置"><strong>2. 确认 Hexo 全局配置</strong></h3><p>在 Hexo 根目录的 <code>_config.yml</code> 中，检查 <code>markdown-it</code> 的配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">render:</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span>  <span class="comment"># 必须开启，否则公式中的 HTML 标签会被转义</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;@traptitech/markdown-it-katex&quot;</span>  <span class="comment"># 确保插件名称正确</span></span><br><span class="line">  <span class="attr">anchors:</span></span><br><span class="line">    <span class="attr">level:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">collisionSuffix:</span> <span class="string">&#x27;v&#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="3-检查-Next-主题配置"><strong>3. 检查 Next 主题配置</strong></h3><p>在 <code>themes/next/_config.yml</code> 中，确保以下配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭 MathJax 和默认的数学公式渲染</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 启用 KaTeX</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 如果 vendor_css 设为 true，需手动添加 CSS（不建议新手开启）</span></span><br><span class="line">    <span class="attr">vendor_css:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><hr><h3 id="4-验证资源加载路径"><strong>4. 验证资源加载路径</strong></h3><h4 id="1-检查-CSS-和-JS-是否引入">(1) 检查 CSS 和 JS 是否引入</h4><ul><li><p><strong>CSS 位置</strong>：<br>打开生成的网页，按 <code>F12</code> 进入开发者工具 → <code>Network</code> 标签 → 刷新页面，检查是否有 <code>katex.min.css</code> 的请求。若未加载，说明主题模板未正确插入 CSS。</p></li><li><p><strong>JS 位置</strong>：<br>同样检查 <code>katex.min.js</code> 和 <code>auto-render.min.js</code> 是否加载。如果未加载，检查主题模板文件的修改是否正确。</p></li></ul><h4 id="2-修复资源路径">(2) 修复资源路径</h4><ul><li><p>如果使用的是旧版 Next 主题，模板文件路径可能是 <code>.swig</code> 或 <code>.njk</code>，确保修改了正确的文件：</p><ul><li><strong>CSS</strong>：<code>themes/next/layout/_partials/head/head.njk</code>（或 <code>.swig</code>）</li><li><strong>JS</strong>：<code>themes/next/layout/_partials/footer.njk</code>（或 <code>.swig</code>）</li></ul></li><li><p>手动指定最新版本 CDN（避免缓存问题）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CSS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-XjKyOOzGykjIg/xn6ACkxIRv6gm2t6/E2lbLU5ZqH7sBE4k1pL5qfhMcJcH4dZnF&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCkM5qKq6gYVvokzNvAQu3fT8KX4l&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">onload</span>=<span class="string">&quot;renderMathInElement(document.body, &#123; delimiters: [&#123;left: &#x27;$$&#x27;, right: &#x27;$$&#x27;, display: true&#125;, &#123;left: &#x27;$&#x27;, right: &#x27;$&#x27;, display: false&#125;] &#125;);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="5-检查文章-Front-matter"><strong>5. 检查文章 Front-matter</strong></h3><p>在需要渲染公式的文章头部，确保已添加 <code>katex: true</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">测试文章</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2023-01-01</span></span><br><span class="line"><span class="attr">katex:</span> <span class="literal">true</span>  <span class="comment"># 必须开启</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><hr><h3 id="6-处理特殊符号转义"><strong>6. 处理特殊符号转义</strong></h3><p>如果公式中的 <code>_</code> 或 <code>*</code> 被错误转义，需调整渲染器配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo 根目录的 _config.yml</span></span><br><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">xhtmlOut:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">breaks:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">typographer:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">quotes:</span> <span class="string">&#x27;“”‘’&#x27;</span></span><br></pre></td></tr></table></figure><hr><h3 id="7-清理缓存并重新生成"><strong>7. 清理缓存并重新生成</strong></h3><p>Hexo 的缓存可能导致修改未生效：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate --debug</span><br></pre></td></tr></table></figure><p>生成后，检查 <code>public</code> 目录下对应文章的 HTML 文件：</p><ul><li>搜索 <code>katex.min.css</code> 和 <code>katex.min.js</code>，确认资源已插入。</li><li>检查公式是否被包裹在 <code>&lt;span class=&quot;katex&quot;&gt;...&lt;/span&gt;</code> 中。</li></ul><hr><h3 id="8-常见问题排查"><strong>8. 常见问题排查</strong></h3><h4 id="1-公式被渲染为纯文本">(1) 公式被渲染为纯文本</h4><ul><li><strong>原因</strong>：KaTeX 资源未加载或初始化失败。</li><li><strong>解决</strong>：按 <code>F12</code> 打开控制台，查看是否有 <code>ReferenceError</code> 或资源加载错误。如果发现 <code>renderMathInElement is not defined</code>，说明 <code>auto-render.min.js</code> 未正确加载。</li></ul><h4 id="2-公式显示错乱">(2) 公式显示错乱</h4><ul><li><p><strong>原因</strong>：<code>$</code> 或 <code>$$</code> 定界符被其他插件干扰。</p></li><li><p><strong>解决</strong>：在 <code>markdown-it</code> 配置中强制指定定界符：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo 的 _config.yml</span></span><br><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;@traptitech/markdown-it-katex&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">delimiters:</span> </span><br><span class="line">          <span class="attr">left:</span> <span class="string">&#x27;$&#x27;</span><span class="string">,</span> <span class="attr">right:</span> <span class="string">&#x27;$&#x27;</span><span class="string">,</span> <span class="attr">display:</span> <span class="literal">false</span></span><br><span class="line">          <span class="attr">left:</span> <span class="string">&#x27;$$&#x27;</span><span class="string">,</span> <span class="attr">right:</span> <span class="string">&#x27;$$&#x27;</span><span class="string">,</span> <span class="attr">display:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="3-与代码高亮冲突">(3) 与代码高亮冲突</h4><ul><li><strong>原因</strong>：某些代码块语法与 KaTeX 冲突。</li><li><strong>解决</strong>：在公式前后添加空行，避免与其他内容粘连。</li></ul><hr><h3 id="9-终极测试"><strong>9. 终极测试</strong></h3><p>创建一个最简单的测试文章，内容如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: KaTeX 测试</span><br><span class="line">date: 2023-01-01</span><br><span class="line"><span class="section">katex: true</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line">行内公式：$E = mc^2$</span><br><span class="line"></span><br><span class="line">块级公式：</span><br><span class="line">$$ \sum<span class="emphasis">_&#123;i=1&#125;^n i = \frac&#123;n(n+1)&#125;&#123;2&#125; $$</span></span><br></pre></td></tr></table></figure><p>如果仍不生效，可能是主题兼容性问题。尝试：</p><ol><li>更新 Next 主题到最新版。</li><li>换用其他 KaTeX 集成方案（如 <a href="https://github.com/next-theme/hexo-filter-mathjax">hexo-filter-mathjax</a>）。</li></ol><hr><p>按以上步骤逐一排查，可解决 99% 的 KaTeX 未生效问题。如果问题依旧，请提供以下信息：</p><ol><li>浏览器控制台截图（Network 和 Console 标签）。</li><li>测试文章的生成后的 HTML 片段。</li><li>Hexo 和 Next 主题的版本号。</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;如果按照 Hexo添加KaTeX插件 仍未生效，可能是某些环节配置错误或冲突导致&lt;/p&gt;</summary>
    
    
    
    <category term="KaTeX" scheme="https://silencejql.github.io/categories/KaTeX/"/>
    
    
    <category term="Hexo" scheme="https://silencejql.github.io/tags/Hexo/"/>
    
    <category term="KaTeX" scheme="https://silencejql.github.io/tags/KaTeX/"/>
    
  </entry>
  
</feed>
